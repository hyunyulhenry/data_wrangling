<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>R을 이용한</title>
  <meta name="description" content="R을 이용한" />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="R을 이용한" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="hyunyulhenry/data_wrangling" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="R을 이용한" />
  
  
  

<meta name="author" content="이현열 (Henry Lee)" />


<meta name="date" content="2021-09-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<link href="libs/bsTable-3.3.7/bootstrapTable.min.css" rel="stylesheet" />
<script src="libs/bsTable-3.3.7/bootstrapTable.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">R을 이용한</h1>
<p class="author"><em>이현열 (Henry Lee)</em></p>
<p class="date"><em>2021-09-04</em></p>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#welcome">Welcome</a>
<ul>
<li><a href="#contact-information">Contact Information</a></li>
</ul></li>
<li><a href="#part-데이터-타입별-다루기">(PART) 데이터 타입별 다루기</a></li>
<li><a href="#numbers"><span class="toc-section-number">1</span> Numbers</a>
<ul>
<li><a href="#integer와-double의-vector-만들기"><span class="toc-section-number">1.1</span> integer와 double의 vector 만들기</a>
<ul>
<li><a href="#둘-간의-형태-바꾸기"><span class="toc-section-number">1.1.1</span> 둘 간의 형태 바꾸기</a></li>
</ul></li>
<li><a href="#비임의non-random-숫자-생성하기"><span class="toc-section-number">1.2</span> 비임의(Non-random) 숫자 생성하기</a>
<ul>
<li><a href="#seq-함수-이용"><span class="toc-section-number">1.2.1</span> <code>seq()</code> 함수 이용</a></li>
</ul></li>
<li><a href="#임의random-숫자-생성하기"><span class="toc-section-number">1.3</span> 임의(Random) 숫자 생성하기</a>
<ul>
<li><a href="#uniform-numbers"><span class="toc-section-number">1.3.1</span> Uniform Numbers</a></li>
<li><a href="#non-uniform-numbers"><span class="toc-section-number">1.3.2</span> Non-Uniform Numbers</a></li>
</ul></li>
<li><a href="#반올림"><span class="toc-section-number">1.4</span> 반올림</a></li>
</ul></li>
<li><a href="#character-strings"><span class="toc-section-number">2</span> Character Strings</a>
<ul>
<li><a href="#문자열-기본"><span class="toc-section-number">2.1</span> 문자열 기본</a></li>
<li><a href="#문자열-출력"><span class="toc-section-number">2.2</span> 문자열 출력</a></li>
<li><a href="#문자열-갯수-확인"><span class="toc-section-number">2.3</span> 문자열 갯수 확인</a></li>
<li><a href="#stringr-패키지를-이용한-문자열-다루기"><span class="toc-section-number">2.4</span> <code>stringr</code> 패키지를 이용한 문자열 다루기</a>
<ul>
<li><a href="#기본-사용법"><span class="toc-section-number">2.4.1</span> 기본 사용법</a></li>
<li><a href="#공백whitespace-제거"><span class="toc-section-number">2.4.2</span> 공백(Whitespace) 제거</a></li>
<li><a href="#문자열-자리수-채우기"><span class="toc-section-number">2.4.3</span> 문자열 자리수 채우기</a></li>
</ul></li>
</ul></li>
<li><a href="#factors"><span class="toc-section-number">3</span> Factors</a>
<ul>
<li><a href="#팩터-생성-및-탐색"><span class="toc-section-number">3.1</span> 팩터 생성 및 탐색</a></li>
<li><a href="#레벨에-순서-부여하기"><span class="toc-section-number">3.2</span> 레벨에 순서 부여하기</a></li>
<li><a href="#순서-재정의"><span class="toc-section-number">3.3</span> 순서 재정의</a></li>
</ul></li>
<li><a href="#date"><span class="toc-section-number">4</span> Date</a>
<ul>
<li><a href="#현재-날짜-및-시간"><span class="toc-section-number">4.1</span> 현재 날짜 및 시간</a></li>
<li><a href="#문자열을-날짜로-변경하기"><span class="toc-section-number">4.2</span> 문자열을 날짜로 변경하기</a></li>
<li><a href="#날짜-관련-정보-추출"><span class="toc-section-number">4.3</span> 날짜 관련 정보 추출</a></li>
<li><a href="#날짜-순서-생성하기"><span class="toc-section-number">4.4</span> 날짜 순서 생성하기</a></li>
</ul></li>
<li><a href="#part-데이터-구조-다루기">(PART) 데이터 구조 다루기</a></li>
<li><a href="#data-structure-basics"><span class="toc-section-number">5</span> Data Structure Basics</a>
<ul>
<li><a href="#구조-파악하기"><span class="toc-section-number">5.1</span> 구조 파악하기</a></li>
</ul></li>
<li><a href="#vector"><span class="toc-section-number">6</span> Vector</a>
<ul>
<li><a href="#벡터-만들기"><span class="toc-section-number">6.1</span> 벡터 만들기</a></li>
<li><a href="#벡터에-값-추가하기"><span class="toc-section-number">6.2</span> 벡터에 값 추가하기</a></li>
<li><a href="#벡터-추출하기"><span class="toc-section-number">6.3</span> 벡터 추출하기</a></li>
</ul></li>
<li><a href="#list"><span class="toc-section-number">7</span> List</a>
<ul>
<li><a href="#리스트-생성하기"><span class="toc-section-number">7.1</span> 리스트 생성하기</a></li>
<li><a href="#기존-리스트에-데이터-추가하기"><span class="toc-section-number">7.2</span> 기존 리스트에 데이터 추가하기</a></li>
<li><a href="#리스트-추출하기"><span class="toc-section-number">7.3</span> 리스트 추출하기</a></li>
</ul></li>
<li><a href="#matrix"><span class="toc-section-number">8</span> Matrix</a>
<ul>
<li><a href="#행렬-생성하기"><span class="toc-section-number">8.1</span> 행렬 생성하기</a></li>
<li><a href="#기존-행렬에-데이터-추가하기"><span class="toc-section-number">8.2</span> 기존 행렬에 데이터 추가하기</a></li>
<li><a href="#행이름-및-열이름-추가하기"><span class="toc-section-number">8.3</span> 행이름 및 열이름 추가하기</a></li>
<li><a href="#행렬-추출하기"><span class="toc-section-number">8.4</span> 행렬 추출하기</a></li>
</ul></li>
<li><a href="#data-frame"><span class="toc-section-number">9</span> Data Frame</a>
<ul>
<li><a href="#데이터프레임-생성하기"><span class="toc-section-number">9.1</span> 데이터프레임 생성하기</a></li>
<li><a href="#기존-데이터프레임에-데이터-추가하기"><span class="toc-section-number">9.2</span> 기존 데이터프레임에 데이터 추가하기</a></li>
<li><a href="#데이터프레임추출하기"><span class="toc-section-number">9.3</span> 데이터프레임추출하기</a></li>
</ul></li>
<li><a href="#missing-value"><span class="toc-section-number">10</span> Missing Value</a>
<ul>
<li><a href="#결측치-테스트"><span class="toc-section-number">10.1</span> 결측치 테스트</a></li>
<li><a href="#결측치-제거"><span class="toc-section-number">10.2</span> 결측치 제거</a>
<ul>
<li><a href="#평균값-대체"><span class="toc-section-number">10.2.1</span> 평균값 대체</a></li>
<li><a href="#데이터-제거"><span class="toc-section-number">10.2.2</span> 데이터 제거</a></li>
</ul></li>
<li><a href="#결측치-대체"><span class="toc-section-number">10.3</span> 결측치 대체</a></li>
</ul></li>
<li><a href="#part-데이터-불러오기-및-내보내기">(PART) 데이터 불러오기 및 내보내기</a></li>
<li><a href="#import-data"><span class="toc-section-number">11</span> Import Data</a>
<ul>
<li><a href="#csv-파일-불러오기"><span class="toc-section-number">11.1</span> csv 파일 불러오기</a>
<ul>
<li><a href="#기본함수"><span class="toc-section-number">11.1.1</span> 기본함수</a></li>
<li><a href="#readr-패키지"><span class="toc-section-number">11.1.2</span> <code>readr</code> 패키지</a></li>
</ul></li>
<li><a href="#텍스트-파일-불러오기"><span class="toc-section-number">11.2</span> 텍스트 파일 불러오기</a></li>
<li><a href="#엑셀-파일-불러오기"><span class="toc-section-number">11.3</span> 엑셀 파일 불러오기</a>
<ul>
<li><a href="#openxlsx-패키지"><span class="toc-section-number">11.3.1</span> <code>openxlsx</code> 패키지</a></li>
<li><a href="#readxl-패키지"><span class="toc-section-number">11.3.2</span> <code>readxl</code> 패키지</a></li>
</ul></li>
<li><a href="#r-object-file"><span class="toc-section-number">11.4</span> R object File</a></li>
</ul></li>
<li><a href="#exporting-data"><span class="toc-section-number">12</span> Exporting Data</a>
<ul>
<li><a href="#텍스트-csv-파일-저장하기"><span class="toc-section-number">12.1</span> 텍스트, csv 파일 저장하기</a>
<ul>
<li><a href="#기본함수-1"><span class="toc-section-number">12.1.1</span> 기본함수</a></li>
<li><a href="#readr-패키지-1"><span class="toc-section-number">12.1.2</span> <code>readr</code> 패키지</a></li>
</ul></li>
<li><a href="#엑셀-저장하기"><span class="toc-section-number">12.2</span> 엑셀 저장하기</a></li>
<li><a href="#r-object-file-1"><span class="toc-section-number">12.3</span> R object File</a></li>
</ul></li>
<li><a href="#part-효율적이고-가독성-높은-코드">(PART) 효율적이고 가독성 높은 코드</a></li>
<li><a href="#함수"><span class="toc-section-number">13</span> 함수</a>
<ul>
<li><a href="#함수의-요소"><span class="toc-section-number">13.1</span> 함수의 요소</a></li>
<li><a href="#인자"><span class="toc-section-number">13.2</span> 인자</a></li>
<li><a href="#다중-결과값-출력"><span class="toc-section-number">13.3</span> 다중 결과값 출력</a></li>
</ul></li>
<li><a href="#loop-statement"><span class="toc-section-number">14</span> Loop Statement</a>
<ul>
<li><a href="#기본-제어-구문-if-for-while-등"><span class="toc-section-number">14.1</span> 기본 제어 구문 (<code>if</code>, <code>for</code>, <code>while</code> 등)</a>
<ul>
<li><a href="#if-구문"><span class="toc-section-number">14.1.1</span> <code>if</code> 구문</a></li>
<li><a href="#if...else-구문"><span class="toc-section-number">14.1.2</span> <code>if...else</code> 구문</a></li>
<li><a href="#for-loop"><span class="toc-section-number">14.1.3</span> <code>for loop</code></a></li>
<li><a href="#while-loop"><span class="toc-section-number">14.1.4</span> <code>while loop</code></a></li>
<li><a href="#next"><span class="toc-section-number">14.1.5</span> <code>next</code></a></li>
</ul></li>
<li><a href="#apply-계열-함수"><span class="toc-section-number">14.2</span> Apply 계열 함수</a>
<ul>
<li><a href="#apply"><span class="toc-section-number">14.2.1</span> <code>apply()</code></a></li>
<li><a href="#lapply"><span class="toc-section-number">14.2.2</span> <code>lapply()</code></a></li>
<li><a href="#sapply"><span class="toc-section-number">14.2.3</span> <code>sapply()</code></a></li>
</ul></li>
<li><a href="#기타-함수"><span class="toc-section-number">14.3</span> 기타 함수</a></li>
</ul></li>
<li><a href="#pipe-operator"><span class="toc-section-number">15</span> Pipe Operator (<code>%&gt;%</code>)</a>
<ul>
<li><a href="#pipe-operator-1"><span class="toc-section-number">15.1</span> Pipe Operator (<code>%&gt;%</code>)</a></li>
</ul></li>
<li><a href="#part-데이터-구조-변형하기">(PART) 데이터 구조 변형하기</a></li>
<li><a href="#tidyr을-이용한-데이터-모양-바꾸기"><span class="toc-section-number">16</span> <code>tidyr</code>을 이용한 데이터 모양 바꾸기</a>
<ul>
<li><a href="#세로로-긴-데이터-만들기"><span class="toc-section-number">16.1</span> 세로로 긴 데이터 만들기</a></li>
<li><a href="#가로로-긴-데이터-만들기"><span class="toc-section-number">16.2</span> 가로로 긴 데이터 만들기</a></li>
<li><a href="#하나의-열을-여러-열로-나누기"><span class="toc-section-number">16.3</span> 하나의 열을 여러 열로 나누기</a></li>
<li><a href="#여러-열을-하나로-합치기"><span class="toc-section-number">16.4</span> 여러 열을 하나로 합치기</a></li>
<li><a href="#tidyr의-기타-함수"><span class="toc-section-number">16.5</span> <code>tidyr</code>의 기타 함수</a>
<ul>
<li><a href="#fill"><span class="toc-section-number">16.5.1</span> <code>fill()</code></a></li>
<li><a href="#replce_na"><span class="toc-section-number">16.5.2</span> <code>replce_na()</code></a></li>
</ul></li>
</ul></li>
<li><a href="#dplyr을-이용한-데이터-변형하기"><span class="toc-section-number">17</span> <code>dplyr</code>을 이용한 데이터 변형하기</a>
<ul>
<li><a href="#select-원하는-열-선택하기"><span class="toc-section-number">17.1</span> <code>select()</code>: 원하는 열 선택하기</a></li>
<li><a href="#rename-이름-새로-부여하기"><span class="toc-section-number">17.2</span> <code>rename()</code>: 이름 새로 부여하기</a></li>
<li><a href="#filter-필터링"><span class="toc-section-number">17.3</span> <code>filter()</code>: 필터링</a></li>
<li><a href="#group_by-원하는-조건으로-그룹화"><span class="toc-section-number">17.4</span> <code>group_by()</code>: 원하는 조건으로 그룹화</a></li>
<li><a href="#summarize-요약값-계산하기"><span class="toc-section-number">17.5</span> <code>summarize()</code>: 요약값 계산하기</a></li>
<li><a href="#arrange-데이터-정렬하기"><span class="toc-section-number">17.6</span> <code>arrange()</code>: 데이터 정렬하기</a></li>
<li><a href="#join-데이터-합치기"><span class="toc-section-number">17.7</span> join(): 데이터 합치기</a></li>
<li><a href="#mutate-새로운-열-생성하기"><span class="toc-section-number">17.8</span> <code>mutate()</code>: 새로운 열 생성하기</a></li>
</ul></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R을 이용한</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="welcome" class="section level1 unnumbered">
<h1 class="unnumbered">Welcome</h1>
<p>본 페이지는 <strong>R을 이용한 데이터 랭글링</strong> 강의 페이지이며, 다음과 같은 내용으로 구성되었습니다.</p>
<ul>
<li>Part 1: 데이터 타입별 다루기
<ul>
<li>Chapter 1: Numbers</li>
<li>Chapter 2: Character Strings</li>
<li>Chapter 3: Factors</li>
<li>Chapter 4: Date</li>
</ul></li>
<li>Part 2: 데이터 구조 다루기
<ul>
<li>Chapter 5: Data Structure Basics</li>
<li>Chapter 6: Vector</li>
<li>Chapter 7: List</li>
<li>Chapter 8: Matrix</li>
<li>Chapter 9: Data Frame</li>
<li>Chapter 10: Missing Value</li>
</ul></li>
<li>Part 3: 데이터 불러오기 및 내보내기
<ul>
<li>Chapter 11: Import Data</li>
<li>Chapter 12: Exporting Data</li>
</ul></li>
<li>Part 4: 데이터 구조 변형하기
<ul>
<li>Chapter 13: 함수</li>
<li>Chapter 14: Loop Statement</li>
<li>Chapter 15: Pipe Operator (%&gt;%)</li>
</ul></li>
<li>Part 5: 데이터 구조 변형하기
<ul>
<li>Chapter 16: tidyr을 이용한 데이터 모양 바꾸기</li>
<li>Chapter 17: dplyr을 이용한 데이터 변형하기</li>
</ul></li>
</ul>
<p>본 강의록의 대부분 내용은 <em>Bradley C. Boehmke</em>의 <strong>Data Wrangling with R (Use R!)</strong>을 참조하였습니다.</p>
<p><a href="https://www.amazon.com/Data-Wrangling-R-Use/dp/3319455982" class="uri">https://www.amazon.com/Data-Wrangling-R-Use/dp/3319455982</a></p>
<p><img src="images/user_cover.jpg" width="30%" style="display: block; margin: auto;" /></p>
<div id="contact-information" class="section level2 unnumbered">
<h2 class="unnumbered">Contact Information</h2>
<ul>
<li>E-mail: <a href="mailto:leebisu@gmail.com" class="email">leebisu@gmail.com</a></li>
<li>Henry’s Quantopia: <a href="https://blog.naver.com/leebisu" class="uri">https://blog.naver.com/leebisu</a></li>
<li>GitHub: <a href="https://github.com/hyunyulhenry/" class="uri">https://github.com/hyunyulhenry/</a></li>
</ul>
<!--chapter:end:index.Rmd-->
</div>
</div>
<div id="part-데이터-타입별-다루기" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) 데이터 타입별 다루기</h1>
</div>
<div id="numbers" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Numbers</h1>
<p>R에서 숫자 형태는 크게 integer와 double로 나눌 수 있습니다. 이 중 integer는 정수를 의미하며, double은 부동소수점 실수를 의미합니다.</p>
<div id="integer와-double의-vector-만들기" class="section level2" number="1.1">
<h2 number="1.1"><span class="header-section-number">1.1</span> integer와 double의 vector 만들기</h2>
<p>먼저 double 형태의 벡터를 만듭니다.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>dbl_var <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">2.5</span>, <span class="fl">4.5</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>dbl_var</span></code></pre></div>
<pre><code>## [1] 1.0 2.5 4.5</code></pre>
<p>숫자 뒤에 L을 붙이면 integer(정수) 형태로 입력됩니다.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>int_var <span class="ot">=</span> <span class="fu">c</span>(1L, 6L, 10L)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>int_var</span></code></pre></div>
<pre><code>## [1]  1  6 10</code></pre>
<div id="둘-간의-형태-바꾸기" class="section level3" number="1.1.1">
<h3 number="1.1.1"><span class="header-section-number">1.1.1</span> 둘 간의 형태 바꾸기</h3>
<p><code>as.*()</code> 함수를 이용해 각 데이터의 형태(Type)을 바꿀 수 있습니다.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.double</span>(int_var)</span></code></pre></div>
<pre><code>## [1]  1  6 10</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># as.numeric(int_var)</span></span></code></pre></div>
<p><code>as.double()</code> 함수를 통해 integer 형태를 double 형태로 바꿀 수 있습니다. <code>as.numeric()</code> 함수는 <code>as.double()</code>과 동일한 역할을 합니다.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.integer</span>(dbl_var)</span></code></pre></div>
<pre><code>## [1] 1 2 4</code></pre>
<p><code>as.integer()</code> 함수를 통해 double 형태를 integer 형태로 바꿀 수 있습니다. 소수점이 사라지고 정수형태로 바뀌었습니다.</p>
</div>
</div>
<div id="비임의non-random-숫자-생성하기" class="section level2" number="1.2">
<h2 number="1.2"><span class="header-section-number">1.2</span> 비임의(Non-random) 숫자 생성하기</h2>
<p>콜론(:)과 <code>c()</code> 함수를 통해 순서가 있는 숫자 벡터를 생성할 수 있습니다.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<p>콜론을 통해 1에서 10까지 숫자가 생성됩니다.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">10</span>)</span></code></pre></div>
<pre><code>## [1]  1  5 10</code></pre>
<p><code>c()</code> 함수 내부에 입력한 숫자로 벡터가 생성됩니다.</p>
<div id="seq-함수-이용" class="section level3" number="1.2.1">
<h3 number="1.2.1"><span class="header-section-number">1.2.1</span> <code>seq()</code> 함수 이용</h3>
<p><code>seq()</code> 함수를 이용할 경우 더욱 다양하게 숫자 벡터를 생성할 수 있습니다.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="dv">1</span>, <span class="at">to =</span> <span class="dv">21</span>, <span class="at">by =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1]  1  3  5  7  9 11 13 15 17 19 21</code></pre>
<p>from에는 시작 숫자, to에는 종료 숫자, by에는 간격을 입력합니다. 즉 1에서 21까지 2 단위로 숫자가 생성됩니다.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">21</span>, <span class="at">length.out =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>##  [1]  0.0  1.5  3.0  4.5  6.0  7.5  9.0 10.5 12.0 13.5 15.0 16.5 18.0 19.5 21.0</code></pre>
<p>인자에 length.out을 쓸 경우 from에서 to까지 동일한 증가폭으로 15개의 숫자를 생성합니다.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span> <span class="dv">4</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4</code></pre>
<p><code>rep()</code> 함수 역시 <code>seq()</code> 함수와 비슷한 역할을 합니다.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">times =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 4 1 2 3 4</code></pre>
<p>times 인자를 추가해줄 경우, 해당 숫자만큼 반복되어 벡터가 생성됩니다.</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="at">each =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 1 1 2 2 3 3 4 4</code></pre>
<p>each 인자를 추가할 경우, 각 숫자를 n번 반복하여 벡터가 생성됩니다.</p>
</div>
</div>
<div id="임의random-숫자-생성하기" class="section level2" number="1.3">
<h2 number="1.3"><span class="header-section-number">1.3</span> 임의(Random) 숫자 생성하기</h2>
<p>이번에는 임의의 숫자를 생성하는 방법에 대해 알아보겠습니다.</p>
<div id="uniform-numbers" class="section level3" number="1.3.1">
<h3 number="1.3.1"><span class="header-section-number">1.3.1</span> Uniform Numbers</h3>
<p>균등 분포(Uniform distribution)에서 임의의 숫자를 생성하기 위해서는 <code>runif()</code> 함수를 사용합니다.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 0.2876 0.7883 0.4090 0.8830 0.9405</code></pre>
<p>기본적으로 <code>runif()</code> 함수는 0과 1사이에서 임의의 숫자를 생성하며, 괄호 안에 입력된 숫자만큼의 갯수의 난수를 생성합니다.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">runif</span>(<span class="dv">5</span>, <span class="at">min =</span> <span class="dv">0</span>, <span class="at">max =</span> <span class="dv">25</span>)</span></code></pre></div>
<pre><code>## [1]  1.139 13.203 22.310 13.786 11.415</code></pre>
<p>min과 max인자를 추가할 경우 해당 값 사이에서 난수를 생성합니다.</p>
<p><code>sample()</code> 함수 역시 Uniform Number를 생성할 수 있습니다.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sample</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">25</span>, <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##  [1] 19 13 21 24 25  4 18 24 24  8</code></pre>
<p>0에서 25까지 숫자중에서 10개의 숫자를 선택하며, replace를 TRUE로 할 경우 복원추출, FALSE로 할 경우 비복원추출을 시행합니다.</p>
</div>
<div id="non-uniform-numbers" class="section level3" number="1.3.2">
<h3 number="1.3.2"><span class="header-section-number">1.3.2</span> Non-Uniform Numbers</h3>
<p>비균등 확률 분포에서 난수를 생성하기 위해서는 크게 4가지 함수가 있습니다.</p>
<ul>
<li>r*: 난수 생성</li>
<li>d*: 밀도(Density) 혹은 확률 질량 함수(Probability mass function)</li>
<li>p*: 누적 분포(Cumulative distribution)</li>
<li>q*: 분위수(Quantile)</li>
</ul>
<div id="정규-분포normal-distribution" class="section level4" number="1.3.2.1">
<h4 number="1.3.2.1"><span class="header-section-number">1.3.2.1</span> 정규 분포(Normal Distribution)</h4>
<p>R에서 정규 분포 관련 함수는 <code>*norm()</code> 입니다.</p>
<p><img src="R을-이용한-데이터-랭글링_files/figure-html/unnamed-chunk-18-1.png" width="70%" style="display: block; margin: auto;" /></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rnorm</span>(<span class="dv">10</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>##  [1]  0.4008  0.1107 -0.5558  1.7869  0.4979 -1.9666  0.7014 -0.4728 -1.0678 -0.2180</code></pre>
<p><code>rnorm()</code> 함수를 이용하여 평균이 0, 표준편차가 1인 정규분포 함수에서 난수 10개를 생성합니다.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dnorm</span>(<span class="dv">0</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0.3989</code></pre>
<p>d = 0인 지점의 밀도를 계산합니다.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pnorm</span>(<span class="dv">0</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0.5</code></pre>
<p>d = 0인 지점의 누적 분포를 구합니다.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qnorm</span>(<span class="fl">0.5</span>, <span class="at">mean =</span> <span class="dv">0</span>, <span class="at">sd =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
<p>누적 분포가 0.5인 지점의 분위수를 구합니다.</p>
</div>
<div id="기타-분포" class="section level4" number="1.3.2.2">
<h4 number="1.3.2.2"><span class="header-section-number">1.3.2.2</span> 기타 분포</h4>
<p>정규 분포 외에도 여러 분포에서 난수를 생성할 수 있습니다. 각 함수별 인자는 <code>help()</code>를 통해 확인할 수 있습니다.</p>
<ul>
<li>이항 분포: rbinom, dbinom, pbinom, qbinom</li>
<li>푸아송 분포: rpois, dpois, ppois, qpois</li>
<li>지수 분포: rexp, dexp, pexp, qexp</li>
<li>감마 분포: rgamma, dgamma, pgamma, qgamma</li>
</ul>
</div>
</div>
</div>
<div id="반올림" class="section level2" number="1.4">
<h2 number="1.4"><span class="header-section-number">1.4</span> 반올림</h2>
<p>숫자의 올림, 내림, 반올림 등을 실행합니다. 먼저 다음과 같이 숫자를 입력합니다.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="fl">1.35</span>, <span class="fl">1.7</span>, <span class="fl">2.05</span>, <span class="fl">2.4</span>, <span class="fl">2.75</span>, <span class="fl">3.1</span>, <span class="fl">3.45</span>, <span class="fl">3.8</span>, <span class="fl">4.15</span>, </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>      <span class="fl">4.5</span>, <span class="fl">4.85</span>, <span class="fl">5.2</span>, <span class="fl">5.55</span>, <span class="fl">5.9</span>)</span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x)</span></code></pre></div>
<pre><code>##  [1] 1 1 2 2 2 3 3 3 4 4 4 5 5 6 6</code></pre>
<p><code>round()</code> 함수는 가장 가까운 정수로 반올림을 합니다.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x, <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 1.00 1.35 1.70 2.05 2.40 2.75 3.10 3.45 3.80 4.15 4.50 4.85 5.20 5.55 5.90</code></pre>
<p>함수 내부에 digits 인자를 추가해 줄 경우, 해당 자리수 만큼 반올림을 합니다.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ceiling</span>(x)</span></code></pre></div>
<pre><code>##  [1] 1 2 2 3 3 3 4 4 4 5 5 5 6 6 6</code></pre>
<p><code>ceiling()</code> 함수는 올림을 실행합니다.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">floor</span>(x)</span></code></pre></div>
<pre><code>##  [1] 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5</code></pre>
<p><code>floor()</code> 함수는 내림을 실행합니다.</p>
<!--chapter:end:number.Rmd-->
</div>
</div>
<div id="character-strings" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Character Strings</h1>
<p>문자열은 R의 기본함수 및<code>stringr</code> 패키지를 이용해 쉽게 다룰 수 있습니다.</p>
<div id="문자열-기본" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> 문자열 기본</h2>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>a <span class="ot">=</span> <span class="st">&#39;learning to create&#39;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>b <span class="ot">=</span> <span class="st">&#39;character strings&#39;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(a, b)</span></code></pre></div>
<pre><code>## [1] &quot;learning to create character strings&quot;</code></pre>
<p><code>paste()</code> 함수를 이용해 두 문자를 붙일 수 있습니다.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&#39;pi is&#39;</span>, pi)</span></code></pre></div>
<pre><code>## [1] &quot;pi is 3.14159265358979&quot;</code></pre>
<p>R에서 pi는 숫자로 입력되어 있으며, <code>paste()</code> 함수를 통해 문자열과 숫자를 붙일수도 있습니다.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">&#39;I&#39;</span>, <span class="st">&#39;love&#39;</span>, <span class="st">&#39;R&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;-&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;I-love-R&quot;</code></pre>
<p>sep 인자를 추가할 경우, 각 단어를 구분하는 문자를 입력할 수 있습니다.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">paste0</span>(<span class="st">&#39;I&#39;</span>, <span class="st">&#39;love&#39;</span>, <span class="st">&#39;R&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;IloveR&quot;</code></pre>
<p><code>paste0()</code> 함수는 구분 문자가 없이 결합됩니다.</p>
</div>
<div id="문자열-출력" class="section level2" number="2.2">
<h2 number="2.2"><span class="header-section-number">2.2</span> 문자열 출력</h2>
<p>문자를 출력하는데 다음과 같은 함수가 있습니다.</p>
<ul>
<li><code>print()</code>: 기본적인 출력 함수</li>
<li><code>noquote()</code>: 쿼트("") 생략</li>
<li><code>cat()</code>: 문자열 결합 및 쿼트 생략</li>
</ul>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="st">&#39;learning to print strings&#39;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;learning to print strings&quot;</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(x, <span class="at">quote =</span> <span class="st">&#39;FALSE&#39;</span>)</span></code></pre></div>
<pre><code>## [1] learning to print strings</code></pre>
<p><code>print()</code> 함수를 이용해 기본적인 출력을 할 수 있으며, quote 인자를 FALSE로 지정하여 쿼트를 생략할 수도 있습니다.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">noquote</span>(x)</span></code></pre></div>
<pre><code>## [1] learning to print strings</code></pre>
<p><code>noquote()</code> 함수를 이용할 경우 쿼트가 출력되지 않습니다.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(x)</span></code></pre></div>
<pre><code>## learning to print strings</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(x, <span class="st">&#39;in R&#39;</span>)</span></code></pre></div>
<pre><code>## learning to print strings in R</code></pre>
<p><code>cat()</code> 함수를 이용할 경우도 출력이 가능하며, 여러 문자를 결합한 뒤 출력하는 것 또한 가능합니다.</p>
</div>
<div id="문자열-갯수-확인" class="section level2" number="2.3">
<h2 number="2.3"><span class="header-section-number">2.3</span> 문자열 갯수 확인</h2>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="st">&#39;How many elements are in this string?&#39;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(x)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<p><code>length()</code> 함수의 경우 element의 갯수를 세므로, 1이 출력됩니다.</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(x)</span></code></pre></div>
<pre><code>## [1] 37</code></pre>
<p>반면 <code>nchar()</code> 함수를 이용하여 문장 내 문자의 갯수를 셀 수 있습니다.</p>
</div>
<div id="stringr-패키지를-이용한-문자열-다루기" class="section level2" number="2.4">
<h2 number="2.4"><span class="header-section-number">2.4</span> <code>stringr</code> 패키지를 이용한 문자열 다루기</h2>
<p>R의 기본함수를 이용하여도 문자열을 다룰 수 있지만, <code>stringr</code> 패키지를 이용할 경우 더욱 작업을 수행할 수 있습니다.</p>
<div id="기본-사용법" class="section level3" number="2.4.1">
<h3 number="2.4.1"><span class="header-section-number">2.4.1</span> 기본 사용법</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&#39;Learning&#39;</span>, <span class="st">&#39;to&#39;</span>, <span class="st">&#39;use&#39;</span>, <span class="st">&#39;the&#39;</span>, <span class="st">&#39;stringr&#39;</span>, <span class="st">&#39;package&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Learningtousethestringrpackage&quot;</code></pre>
<p><code>str_c()</code> 함수는 <code>paste0()</code>와 기능이 동일합니다.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_c</span>(<span class="st">&#39;Learning&#39;</span>, <span class="st">&#39;to&#39;</span>, <span class="st">&#39;use&#39;</span>, <span class="st">&#39;the&#39;</span>, <span class="st">&#39;stringr&#39;</span>, <span class="st">&#39;package&#39;</span>, <span class="at">sep =</span> <span class="st">&#39; &#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Learning to use the stringr package&quot;</code></pre>
<p>sep 인자를 통해 구분자를 추가할 수 있으며, 이는 <code>paste()</code>와 동일합니다.</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;Learning&#39;</span>, <span class="st">&#39;to&#39;</span>, <span class="cn">NA</span>, <span class="st">&#39;use&#39;</span>, <span class="st">&#39;the&#39;</span>, <span class="cn">NA</span>, <span class="st">&#39;stringr&#39;</span>, <span class="st">&#39;package&#39;</span>)</span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_length</span>(text)</span></code></pre></div>
<pre><code>## [1]  8  2 NA  3  3 NA  7  7</code></pre>
<p><code>str_length()</code> 함수는 문자의 갯수를 셉니다.</p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="st">&#39;Learning to use the stringr package&#39;</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="at">start =</span> <span class="dv">1</span>, <span class="at">end =</span> <span class="dv">15</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Learning to use&quot;</code></pre>
<p><code>str_sub()</code> 함수는 start부터 end까지의 문자를 출력합니다.</p>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_sub</span>(x, <span class="at">start =</span> <span class="sc">-</span><span class="dv">7</span>, <span class="at">end =</span> <span class="sc">-</span><span class="dv">1</span>)</span></code></pre></div>
<pre><code>## [1] &quot;package&quot;</code></pre>
<p>start 혹은 end에 음수를 입력하면, 문장의 맨 끝에서부터 start/end 지점이 계산됩니다.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_dup</span>(<span class="st">&#39;beer&#39;</span>, <span class="at">times =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;beerbeerbeer&quot;</code></pre>
<p><code>str_dub()</code> 함수를 이용해 특정 문자를 반복되게 출력할 수 있습니다.</p>
</div>
<div id="공백whitespace-제거" class="section level3" number="2.4.2">
<h3 number="2.4.2"><span class="header-section-number">2.4.2</span> 공백(Whitespace) 제거</h3>
<p>텍스트 데이터를 다룰때는 빈 공백이 따라오는 경우가 많으며, 데이터분석의 편이를 위해 이를 제거해야 합니다.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>text <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;Text &#39;</span>, <span class="st">&#39; with&#39;</span>, <span class="st">&#39; whitespace &#39;</span>, <span class="st">&#39; on&#39;</span>, <span class="st">&#39;both &#39;</span>, <span class="st">&#39;sides &#39;</span>)</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(text)</span></code></pre></div>
<pre><code>## [1] &quot;Text &quot;        &quot; with&quot;        &quot; whitespace &quot; &quot; on&quot;          &quot;both &quot;        &quot;sides &quot;</code></pre>
<p>각 단어의 좌/우 혹은 양쪽에 공백이 있습니다.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(text, <span class="at">side =</span> <span class="st">&#39;left&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Text &quot;       &quot;with&quot;        &quot;whitespace &quot; &quot;on&quot;          &quot;both &quot;       &quot;sides &quot;</code></pre>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(text, <span class="at">side =</span> <span class="st">&#39;right&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Text&quot;        &quot; with&quot;       &quot; whitespace&quot; &quot; on&quot;         &quot;both&quot;        &quot;sides&quot;</code></pre>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_trim</span>(text, <span class="at">side =</span> <span class="st">&#39;both&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Text&quot;       &quot;with&quot;       &quot;whitespace&quot; &quot;on&quot;         &quot;both&quot;       &quot;sides&quot;</code></pre>
<p><code>str_trim()</code> 함수를 통해 좌/우/양쪽의 공백을 제거할 수 있습니다.</p>
</div>
<div id="문자열-자리수-채우기" class="section level3" number="2.4.3">
<h3 number="2.4.3"><span class="header-section-number">2.4.3</span> 문자열 자리수 채우기</h3>
<p>원하는 자리수를 채우기 위해 문자열에 공백 혹은 특정 문자를 입력할 수 있습니다.</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_pad</span>(<span class="st">&#39;beer&#39;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&#39;left&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;      beer&quot;</code></pre>
<p>10자리를 맞추기 위해 좌측에 공백이 추가되었습니다.</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str_pad</span>(<span class="st">&#39;beer&#39;</span>, <span class="at">width =</span> <span class="dv">10</span>, <span class="at">side =</span> <span class="st">&#39;left&#39;</span>, <span class="at">pad =</span> <span class="st">&#39;!&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;!!!!!!beer&quot;</code></pre>
<p>pad 인자를 추가할 경우, 공백이 아닌 해당 문자가 추가됩니다.</p>
<!--chapter:end:character.Rmd-->
</div>
</div>
</div>
<div id="factors" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Factors</h1>
<p>R에서 Factor 형태는 범주형(categorical) 데이터를 다룰때 사용됩니다.</p>
<div id="팩터-생성-및-탐색" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> 팩터 생성 및 탐색</h2>
<div class="sourceCode" id="cb93"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">=</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&#39;male&#39;</span>, <span class="st">&#39;female&#39;</span>, <span class="st">&#39;female&#39;</span>, <span class="st">&#39;male&#39;</span>, <span class="st">&#39;female&#39;</span>))</span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>gender</span></code></pre></div>
<pre><code>## [1] male   female female male   female
## Levels: female male</code></pre>
<p><code>factor()</code> 함수를 통해 팩터를 생성하며, Levels에는 값들의 고유값인 female과 male이 설정되어 있습니다.</p>
<div class="sourceCode" id="cb95"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unclass</span>(gender)</span></code></pre></div>
<pre><code>## [1] 2 1 1 2 1
## attr(,&quot;levels&quot;)
## [1] &quot;female&quot; &quot;male&quot;</code></pre>
<div class="sourceCode" id="cb97"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(gender)</span></code></pre></div>
<pre><code>## [1] &quot;female&quot; &quot;male&quot;</code></pre>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(gender)</span></code></pre></div>
<pre><code>## female   male 
##      3      2</code></pre>
<p>female은 1, male은 2의 integer가 매칭되어 있으므로, <code>unclass()</code> 함수를 이용하여 대표값을 출력할 수 있습니다. 또한 <code>levels()</code> 함수를 이용해 레벨을 출력할 수 있으며, <code>summary()</code> 함수를 이용할 경우 각 레벨의 빈도가 출력됩니다.</p>
</div>
<div id="레벨에-순서-부여하기" class="section level2" number="3.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> 레벨에 순서 부여하기</h2>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">=</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&#39;male&#39;</span>, <span class="st">&#39;female&#39;</span>, <span class="st">&#39;female&#39;</span>, <span class="st">&#39;male&#39;</span>, <span class="st">&#39;female&#39;</span>))</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>gender</span></code></pre></div>
<pre><code>## [1] male   female female male   female
## Levels: female male</code></pre>
<p>레벨을 정의하지 않을 시, 알파벳 순서인 female, male의 순서로 레벨이 정의됩니다.</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a>gender <span class="ot">=</span> <span class="fu">factor</span>(<span class="fu">c</span>(<span class="st">&#39;male&#39;</span>, <span class="st">&#39;female&#39;</span>, <span class="st">&#39;female&#39;</span>, <span class="st">&#39;male&#39;</span>, <span class="st">&#39;female&#39;</span>),</span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&#39;male&#39;</span>, <span class="st">&#39;female&#39;</span>))</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>gender</span></code></pre></div>
<pre><code>## [1] male   female female male   female
## Levels: male female</code></pre>
<p>반면 levels 인자를 입력하면, 레벨의 순서가 정의됩니다.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>ses <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;low&#39;</span>, <span class="st">&#39;middle&#39;</span>, <span class="st">&#39;low&#39;</span>, <span class="st">&#39;low&#39;</span>, <span class="st">&#39;low&#39;</span>, <span class="st">&#39;low&#39;</span>, <span class="st">&#39;middle&#39;</span>, <span class="st">&#39;low&#39;</span>, <span class="st">&#39;middle&#39;</span>,</span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;middle&#39;</span>, <span class="st">&#39;middle&#39;</span>, <span class="st">&#39;middle&#39;</span>, <span class="st">&#39;middle&#39;</span>, <span class="st">&#39;high&#39;</span>, <span class="st">&#39;high&#39;</span>, <span class="st">&#39;low&#39;</span>, <span class="st">&#39;middle&#39;</span>,</span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">&#39;middle&#39;</span>, <span class="st">&#39;low&#39;</span>, <span class="st">&#39;high&#39;</span>)</span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a>ses <span class="ot">=</span> <span class="fu">factor</span>(ses, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&#39;low&#39;</span>, <span class="st">&#39;middle&#39;</span>, <span class="st">&#39;high&#39;</span>), <span class="at">ordered =</span> <span class="cn">TRUE</span>)</span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>ses</span></code></pre></div>
<pre><code>##  [1] low    middle low    low    low    low    middle low    middle middle middle middle middle high   high  
## [16] low    middle middle low    high  
## Levels: low &lt; middle &lt; high</code></pre>
<p>또한 ordered 인자를 TRUE로 지정할 시, levels의 크기도 정의됩니다.</p>
</div>
<div id="순서-재정의" class="section level2" number="3.3">
<h2 number="3.3"><span class="header-section-number">3.3</span> 순서 재정의</h2>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="fu">fct_recode</span>(ses, <span class="at">small =</span> <span class="st">&#39;low&#39;</span>, <span class="at">medium =</span> <span class="st">&#39;middle&#39;</span>, <span class="at">large =</span> <span class="st">&#39;high&#39;</span>)</span></code></pre></div>
<pre><code>##  [1] small  medium small  small  small  small  medium small  medium medium medium medium medium large  large 
## [16] small  medium medium small  large 
## Levels: small &lt; medium &lt; large</code></pre>
<p><code>forcats</code> 패키지의 <code>fct_recode()</code> 함수를 이용해 팩터의 레벨을 재입력 할 수 있습니다. 이 외에도 해당 패키지에는 팩터를 다룰수 있는 다양한 함수가 존재합니다.</p>
<!--chapter:end:factor.Rmd-->
</div>
</div>
<div id="date" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Date</h1>
<p>날짜, 시간에 관련된 데이터는 R의 기본함수 및 <code>lubridate</code> 패키지를 이용해 쉽게 다룰 수 있습니다.</p>
<div id="현재-날짜-및-시간" class="section level2" number="4.1">
<h2 number="4.1"><span class="header-section-number">4.1</span> 현재 날짜 및 시간</h2>
<div class="sourceCode" id="cb109"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.timezone</span>()</span></code></pre></div>
<pre><code>## [1] &quot;Asia/Seoul&quot;</code></pre>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.Date</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-09-04&quot;</code></pre>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Sys.time</span>()</span></code></pre></div>
<pre><code>## [1] &quot;2021-09-04 17:11:03 KST&quot;</code></pre>
<p>기본 함수를 통해 현재 타임존 및 날짜, 시간을 확인할 수 있습니다.</p>
</div>
<div id="문자열을-날짜로-변경하기" class="section level2" number="4.2">
<h2 number="4.2"><span class="header-section-number">4.2</span> 문자열을 날짜로 변경하기</h2>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;2015-07-01&#39;</span>, <span class="st">&#39;2015-08-01&#39;</span>, <span class="st">&#39;2015-09-01&#39;</span>)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>x_date <span class="ot">=</span> <span class="fu">as.Date</span>(x)</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(x_date)</span></code></pre></div>
<pre><code>##  Date[1:3], format: &quot;2015-07-01&quot; &quot;2015-08-01&quot; &quot;2015-09-01&quot;</code></pre>
<p><code>as.Date()</code> 함수를 이용할 경우, 문자열 형태가 Date로 변경됩니다.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;07/01/2015&#39;</span>, <span class="st">&#39;08/01/2015&#39;</span>, <span class="st">&#39;09/01/2015&#39;</span>)</span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a><span class="fu">as.Date</span>(y, <span class="at">format =</span> <span class="st">&#39;%m/%d/%Y&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2015-07-01&quot; &quot;2015-08-01&quot; &quot;2015-09-01&quot;</code></pre>
<p>YYYY-MM-DD 형태가 아닌 다른 형태로 입력된 경우, format을 직접 입력하여 Date 형태로 변경할 수 있습니다.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ymd</span>(x)</span></code></pre></div>
<pre><code>## [1] &quot;2015-07-01&quot; &quot;2015-08-01&quot; &quot;2015-09-01&quot;</code></pre>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mdy</span>(y)</span></code></pre></div>
<pre><code>## [1] &quot;2015-07-01&quot; &quot;2015-08-01&quot; &quot;2015-09-01&quot;</code></pre>
<p><code>lubridate</code> 패키지를 이용할 경우 YYYY-MM-DD 형태는 <code>ymd()</code>, MM-DD-YYYY 형태는 <code>mdy()</code> 함수를 사용해 손쉽게 Date 형태로 변경할 수 있습니다. 이 외에도 lubridate에는 Date 형태로 변경하기 위한 다양한 함수가 존재합니다.</p>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
순서
</th>
<th style="text-align:center;">
함수
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
year, month, day
</td>
<td style="text-align:center;">
ymd()
</td>
</tr>
<tr>
<td style="text-align:center;">
year, day, month
</td>
<td style="text-align:center;">
ydm()
</td>
</tr>
<tr>
<td style="text-align:center;">
month, day, year
</td>
<td style="text-align:center;">
mdy()
</td>
</tr>
<tr>
<td style="text-align:center;">
day, month, year
</td>
<td style="text-align:center;">
dmy()
</td>
</tr>
<tr>
<td style="text-align:center;">
hour, minute
</td>
<td style="text-align:center;">
hm()
</td>
</tr>
<tr>
<td style="text-align:center;">
hour, minute, second
</td>
<td style="text-align:center;">
hms()
</td>
</tr>
<tr>
<td style="text-align:center;">
year, month, day, hour, minute, secod
</td>
<td style="text-align:center;">
ymd_hms()
</td>
</tr>
</tbody>
</table>
</div>
<div id="날짜-관련-정보-추출" class="section level2" number="4.3">
<h2 number="4.3"><span class="header-section-number">4.3</span> 날짜 관련 정보 추출</h2>
<p><code>lubridate</code> 패키지에는 날짜 관련 정보를 추출할 수 있는 다양한 함수가 존재합니다.</p>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
정보
</th>
<th style="text-align:center;">
함수
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
Year
</td>
<td style="text-align:center;">
year()
</td>
</tr>
<tr>
<td style="text-align:center;">
Month
</td>
<td style="text-align:center;">
month()
</td>
</tr>
<tr>
<td style="text-align:center;">
Week
</td>
<td style="text-align:center;">
week()
</td>
</tr>
<tr>
<td style="text-align:center;">
Day of year
</td>
<td style="text-align:center;">
yday()
</td>
</tr>
<tr>
<td style="text-align:center;">
Day of month
</td>
<td style="text-align:center;">
mday()
</td>
</tr>
<tr>
<td style="text-align:center;">
Day of week
</td>
<td style="text-align:center;">
wday()
</td>
</tr>
<tr>
<td style="text-align:center;">
Hour
</td>
<td style="text-align:center;">
hour()
</td>
</tr>
<tr>
<td style="text-align:center;">
Minute
</td>
<td style="text-align:center;">
minute()
</td>
</tr>
<tr>
<td style="text-align:center;">
Second
</td>
<td style="text-align:center;">
second()
</td>
</tr>
<tr>
<td style="text-align:center;">
Time zone
</td>
<td style="text-align:center;">
tz()
</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;2015-07-01&#39;</span>, <span class="st">&#39;2015-08-01&#39;</span>, <span class="st">&#39;2015-09-01&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="fu">year</span>(x)</span></code></pre></div>
<pre><code>## [1] 2015 2015 2015</code></pre>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="fu">month</span>(x)</span></code></pre></div>
<pre><code>## [1] 7 8 9</code></pre>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">week</span>(x)</span></code></pre></div>
<pre><code>## [1] 26 31 35</code></pre>
<p><code>year()</code>, <code>month()</code>, <code>week()</code> 함수를 통해 년도, 월, 주 정보를 확인할 수 있습니다.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">=</span> <span class="st">&#39;2015-09-15&#39;</span></span></code></pre></div>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="fu">yday</span>(z)</span></code></pre></div>
<pre><code>## [1] 258</code></pre>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mday</span>(z)</span></code></pre></div>
<pre><code>## [1] 15</code></pre>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">wday</span>(z)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<p><code>yday()</code>, <code>mday()</code>, <code>wday()</code> 함수는 각각 해당 년도에서 몇번째 일인지, 해당 월에서 몇번째 일인지, 해당 주에서 몇번째 일인지를 계산합니다.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">ymd</span>(<span class="st">&#39;2015-07-01&#39;</span>, <span class="st">&#39;2015-08-01&#39;</span>, <span class="st">&#39;2015-09-01&#39;</span>) </span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">+</span> <span class="fu">years</span>(<span class="dv">1</span>) <span class="sc">-</span> <span class="fu">days</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">9</span>, <span class="dv">21</span>))</span></code></pre></div>
<pre><code>## [1] &quot;2016-06-29&quot; &quot;2016-07-23&quot; &quot;2016-08-11&quot;</code></pre>
<p>날짜에서 년도와 월, 일자를 더하거나 빼는 계산 역시 가능합니다.</p>
</div>
<div id="날짜-순서-생성하기" class="section level2" number="4.4">
<h2 number="4.4"><span class="header-section-number">4.4</span> 날짜 순서 생성하기</h2>
<p><code>seq()</code> 함수를 이용할 경우 날짜 벡터를 생성할 수도 있습니다.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="fu">ymd</span>(<span class="st">&#39;2010-01-01&#39;</span>), <span class="fu">ymd</span>(<span class="st">&#39;2015-01-01&#39;</span>), <span class="at">by =</span><span class="st">&#39;years&#39;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;2010-01-01&quot; &quot;2011-01-01&quot; &quot;2012-01-01&quot; &quot;2013-01-01&quot; &quot;2014-01-01&quot; &quot;2015-01-01&quot;</code></pre>
<p>2010년 1월 1일부터 2015년 1월 1일까지 1년을 기준으로 벡터가 생성됩니다.</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">seq</span>(<span class="fu">ymd</span>(<span class="st">&#39;2010-09-01&#39;</span>), <span class="fu">ymd</span>(<span class="st">&#39;2010-09-30&#39;</span>), <span class="at">by =</span><span class="st">&#39;2 days&#39;</span>)</span></code></pre></div>
<pre><code>##  [1] &quot;2010-09-01&quot; &quot;2010-09-03&quot; &quot;2010-09-05&quot; &quot;2010-09-07&quot; &quot;2010-09-09&quot; &quot;2010-09-11&quot; &quot;2010-09-13&quot; &quot;2010-09-15&quot;
##  [9] &quot;2010-09-17&quot; &quot;2010-09-19&quot; &quot;2010-09-21&quot; &quot;2010-09-23&quot; &quot;2010-09-25&quot; &quot;2010-09-27&quot; &quot;2010-09-29&quot;</code></pre>
<p>지정 일수만큼 벡터를 생성할 수도 있습니다.</p>
<!--chapter:end:date.Rmd-->
</div>
</div>
<div id="part-데이터-구조-다루기" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) 데이터 구조 다루기</h1>
</div>
<div id="data-structure-basics" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Data Structure Basics</h1>
<p>R의 데이터구조는 크게 벡터, 리스트, 매트릭스, 데이터프레임으로 나누어집니다. (array는 잘 사용되지 않습니다)</p>
<table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:center;">
Dimension
</th>
<th style="text-align:center;">
Homogeneous
</th>
<th style="text-align:center;">
Heterogeneous
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
1D
</td>
<td style="text-align:center;">
Atomic Vector
</td>
<td style="text-align:center;">
List
</td>
</tr>
<tr>
<td style="text-align:center;">
2D
</td>
<td style="text-align:center;">
Matrix
</td>
<td style="text-align:center;">
Data frame
</td>
</tr>
<tr>
<td style="text-align:center;">
nD
</td>
<td style="text-align:center;">
Array
</td>
<td style="text-align:center;">
</td>
</tr>
</tbody>
</table>
<p>Homogenous는 컬럼간 데이터 구조가 같은 경우, Heterogeneous는 다른 경우입니다.</p>
<div id="구조-파악하기" class="section level2" number="5.1">
<h2 number="5.1"><span class="header-section-number">5.1</span> 구조 파악하기</h2>
<p><code>str()</code> 함수를 이용해 각 데이터의 구조(structure)를 파악할 수 있습니다.</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>vector <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>list <span class="ot">=</span> <span class="fu">list</span>(<span class="at">item1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">item2 =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">18</span>])</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a>matrix <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">item1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">18</span>, <span class="at">item2 =</span> LETTERS[<span class="dv">1</span><span class="sc">:</span><span class="dv">18</span>])</span></code></pre></div>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a>vector</span></code></pre></div>
<pre><code>##  [1]  1  2  3  4  5  6  7  8  9 10</code></pre>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(vector)</span></code></pre></div>
<pre><code>##  int [1:10] 1 2 3 4 5 6 7 8 9 10</code></pre>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a>list</span></code></pre></div>
<pre><code>## $item1
##  [1]  1  2  3  4  5  6  7  8  9 10
## 
## $item2
##  [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; &quot;J&quot; &quot;K&quot; &quot;L&quot; &quot;M&quot; &quot;N&quot; &quot;O&quot; &quot;P&quot; &quot;Q&quot; &quot;R&quot;</code></pre>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(list)</span></code></pre></div>
<pre><code>## List of 2
##  $ item1: int [1:10] 1 2 3 4 5 6 7 8 9 10
##  $ item2: chr [1:18] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; ...</code></pre>
<div class="sourceCode" id="cb152"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a>matrix</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<div class="sourceCode" id="cb154"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(matrix)</span></code></pre></div>
<pre><code>##  int [1:4, 1:3] 1 2 3 4 5 6 7 8 9 10 ...</code></pre>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##    item1 item2
## 1      1     A
## 2      2     B
## 3      3     C
## 4      4     D
## 5      5     E
## 6      6     F
## 7      7     G
## 8      8     H
## 9      9     I
## 10    10     J
## 11    11     K
## 12    12     L
## 13    13     M
## 14    14     N
## 15    15     O
## 16    16     P
## 17    17     Q
## 18    18     R</code></pre>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    18 obs. of  2 variables:
##  $ item1: int  1 2 3 4 5 6 7 8 9 10 ...
##  $ item2: chr  &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; ...</code></pre>
<!--chapter:end:Data-Structure-Basics.Rmd-->
</div>
</div>
<div id="vector" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Vector</h1>
<p>벡터는 R의 가장 기본적인 데이터 구조로써 integer, double, logical, character로 이루어져 있습니다.</p>
<div id="벡터-만들기" class="section level2" number="6.1">
<h2 number="6.1"><span class="header-section-number">6.1</span> 벡터 만들기</h2>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a>vec_integer <span class="ot">=</span> <span class="dv">8</span><span class="sc">:</span><span class="dv">17</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a>vec_integer</span></code></pre></div>
<pre><code>##  [1]  8  9 10 11 12 13 14 15 16 17</code></pre>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a>vec_double <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.6</span>, <span class="fl">0.2</span>)</span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a>vec_double</span></code></pre></div>
<pre><code>## [1] 0.5 0.6 0.2</code></pre>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>vec_logical <span class="ot">=</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>)</span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a>vec_logical</span></code></pre></div>
<pre><code>## [1]  TRUE FALSE FALSE</code></pre>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a>vec_char <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>)</span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a>vec_char</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</code></pre>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;1&quot; &quot;2&quot; &quot;3&quot;</code></pre>
<p>숫자와 문자가 같이 벡터로 묶일 경우, 숫자는 모두 문자 형태로 변경됩니다.</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] 1 2 3 1 0</code></pre>
<p>숫자와 논리값(Logical: TRUE/FALSE)이 같이 묶일 경우 TRUE는 1, FALSE는 0으로 치환된 후 숫자 형태로 변경됩니다.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, <span class="st">&#39;c&#39;</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## [1] &quot;a&quot;     &quot;b&quot;     &quot;c&quot;     &quot;TRUE&quot;  &quot;FALSE&quot;</code></pre>
<p>문자와 논리값이 같이 묶일 경우 모두 문자 형태로 변경됩니다.</p>
</div>
<div id="벡터에-값-추가하기" class="section level2" number="6.2">
<h2 number="6.2"><span class="header-section-number">6.2</span> 벡터에 값 추가하기</h2>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">=</span> <span class="dv">8</span><span class="sc">:</span><span class="dv">17</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(v1, <span class="dv">18</span><span class="sc">:</span><span class="dv">22</span>)</span></code></pre></div>
<pre><code>##  [1]  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22</code></pre>
<p><code>c()</code> 함수를 이용해 기존 벡터에 새로운 값을 추가할 수 있습니다.</p>
</div>
<div id="벡터-추출하기" class="section level2" number="6.3">
<h2 number="6.3"><span class="header-section-number">6.3</span> 벡터 추출하기</h2>
<p>대괄호([])을 이용해 원하는 부분의 데이터를 추출할 수 있습니다.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>v1</span></code></pre></div>
<pre><code>##  [1]  8  9 10 11 12 13 14 15 16 17</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 9</code></pre>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>]</span></code></pre></div>
<pre><code>## [1]  9 10 11</code></pre>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>)]</span></code></pre></div>
<pre><code>## [1]  9 11 13 15</code></pre>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">4</span>)]</span></code></pre></div>
<pre><code>## [1]  9  9 11</code></pre>
<p>대괄호 안에 숫자를 입력시, 벡터에서 해당 순서의 데이터가 추출됩니다.</p>
<div class="sourceCode" id="cb186"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="sc">-</span><span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [1]  9 10 11 12 13 14 15 16 17</code></pre>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a>v1[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>)]</span></code></pre></div>
<pre><code>## [1]  8 10 12 14 16 17</code></pre>
<p>마이너스 기호를 입력 시, 해당 순서를 제외한 데이터가 추출됩니다.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a>v1[v1 <span class="sc">&lt;</span> <span class="dv">12</span>]</span></code></pre></div>
<pre><code>## [1]  8  9 10 11</code></pre>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a>v1[v1 <span class="sc">&lt;</span> <span class="dv">12</span> <span class="sc">|</span> v1 <span class="sc">&gt;</span> <span class="dv">15</span>]</span></code></pre></div>
<pre><code>## [1]  8  9 10 11 16 17</code></pre>
<p>대괄호 내부에 조건을 설정하여 데이터를 추출할 수도 있습니다.</p>
<!--chapter:end:vector.Rmd-->
</div>
</div>
<div id="list" class="section level1" number="7">
<h1 number="7"><span class="header-section-number">7</span> List</h1>
<p>List 형태는 항목(Element) 간 타입이나 길이가 달라도 데이터가 결합할 수 있습니다.</p>
<div id="리스트-생성하기" class="section level2" number="7.1">
<h2 number="7.1"><span class="header-section-number">7.1</span> 리스트 생성하기</h2>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&#39;a&#39;</span>, <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>), <span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">4.2</span>))</span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l)</span></code></pre></div>
<pre><code>## List of 4
##  $ : int [1:3] 1 2 3
##  $ : chr &quot;a&quot;
##  $ : logi [1:3] TRUE FALSE TRUE
##  $ : num [1:2] 2.5 4.2</code></pre>
<p>첫번째 리스트는 정수, 두번째는 문자, 세번째는 논리값, 네번째는 숫자로 이루어져 있습니다.</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="fu">list</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>], <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)))</span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l)</span></code></pre></div>
<pre><code>## List of 2
##  $ : int [1:3] 1 2 3
##  $ :List of 2
##   ..$ : chr [1:5] &quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot; ...
##   ..$ : logi [1:3] TRUE FALSE TRUE</code></pre>
<p>또한 리스트 내에 리스트를 생성하는 것 역시 가능합니다.</p>
</div>
<div id="기존-리스트에-데이터-추가하기" class="section level2" number="7.2">
<h2 number="7.2"><span class="header-section-number">7.2</span> 기존 리스트에 데이터 추가하기</h2>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>l1 <span class="ot">=</span> <span class="fu">list</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="st">&#39;a&#39;</span>, <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>))</span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l1)</span></code></pre></div>
<pre><code>## List of 3
##  $ : int [1:3] 1 2 3
##  $ : chr &quot;a&quot;
##  $ : logi [1:3] TRUE FALSE TRUE</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>l2 <span class="ot">=</span> <span class="fu">append</span>(l1, <span class="fu">list</span>(<span class="fu">c</span>(<span class="fl">2.5</span>, <span class="fl">4.2</span>)))</span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l2)</span></code></pre></div>
<pre><code>## List of 4
##  $ : int [1:3] 1 2 3
##  $ : chr &quot;a&quot;
##  $ : logi [1:3] TRUE FALSE TRUE
##  $ : num [1:2] 2.5 4.2</code></pre>
<p><code>append()</code> 함수를 이용해 기존 리스트에 추가로 리스트를 붙일 수 있습니다.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>l2<span class="sc">$</span>item4 <span class="ot">=</span> <span class="st">&#39;new list item&#39;</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(l2)</span></code></pre></div>
<pre><code>## List of 5
##  $      : int [1:3] 1 2 3
##  $      : chr &quot;a&quot;
##  $      : logi [1:3] TRUE FALSE TRUE
##  $      : num [1:2] 2.5 4.2
##  $ item4: chr &quot;new list item&quot;</code></pre>
<p>또한 기존 리스트에 달러 사인($)을 입력할 경우, 이름과 함께 리스트가 추가됩니다.</p>
</div>
<div id="리스트-추출하기" class="section level2" number="7.3">
<h2 number="7.3"><span class="header-section-number">7.3</span> 리스트 추출하기</h2>
<p>리스트 역시 대괄호를 이용해 데이터를 추추할 수 있습니다.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>l2[<span class="dv">1</span>]</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>l2[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>## [[1]]
## [1] 1 2 3
## 
## [[2]]
## [1]  TRUE FALSE  TRUE</code></pre>
<p>리스트에 이름이 있을 경우, 이를 이용해 추출도 가능합니다.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a>l2[<span class="st">&#39;item4&#39;</span>]</span></code></pre></div>
<pre><code>## $item4
## [1] &quot;new list item&quot;</code></pre>
<p>대괄호를 두번, 혹은 달러 사인을 이용해 데이터를 추출할 경우 결과물의 형태는 단순화되어 나타납니다.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a>l2[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>l2<span class="sc">$</span>item4</span></code></pre></div>
<pre><code>## [1] &quot;new list item&quot;</code></pre>
<p>특정 리스트에서 항목을 추출하기 위해서는 [[와 [를 함께 사용합니다.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>l2[[<span class="dv">1</span>]]</span></code></pre></div>
<pre><code>## [1] 1 2 3</code></pre>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>l2[[<span class="dv">1</span>]][<span class="dv">3</span>]</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<!--chapter:end:list.Rmd-->
</div>
</div>
<div id="matrix" class="section level1" number="8">
<h1 number="8"><span class="header-section-number">8</span> Matrix</h1>
<div id="행렬-생성하기" class="section level2" number="8.1">
<h2 number="8.1"><span class="header-section-number">8.1</span> 행렬 생성하기</h2>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>m1</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    3    5
## [2,]    2    4    6</code></pre>
<p><code>matrix()</code> 함수를 이용해 행렬을 생성할 수 있으며, nrow와 ncol을 통해 행과 열 갯수를 지정할 수 있습니다.</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">=</span> <span class="fu">matrix</span>(letters[<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>], <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a>m2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,] &quot;a&quot;  &quot;c&quot;  &quot;e&quot; 
## [2,] &quot;b&quot;  &quot;d&quot;  &quot;f&quot;</code></pre>
<p>문자 형태로 이루어진 행렬 역시 생성할 수 있습니다. 그러나 숫자와 문자가 한 행렬 내에서 같이 사용될 수는 없습니다.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">=</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">8</span></span></code></pre></div>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(v1, v2)</span></code></pre></div>
<pre><code>##      v1 v2
## [1,]  1  5
## [2,]  2  6
## [3,]  3  7
## [4,]  4  8</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(v1, v2)</span></code></pre></div>
<pre><code>##    [,1] [,2] [,3] [,4]
## v1    1    2    3    4
## v2    5    6    7    8</code></pre>
<p><code>cbind()</code> 함수는 열로 데이터를 합치며, <code>rbind()</code> 함수는 행으로 데이터를 합칩니다.</p>
</div>
<div id="기존-행렬에-데이터-추가하기" class="section level2" number="8.2">
<h2 number="8.2"><span class="header-section-number">8.2</span> 기존 행렬에 데이터 추가하기</h2>
<p><code>cbind()</code>와 <code>rbind()</code> 함수를 이용해 기존 행렬에 데이터를 추가할 수 있습니다.</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a>m1 <span class="ot">=</span> <span class="fu">cbind</span>(v1, v2)</span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a>m1</span></code></pre></div>
<pre><code>##      v1 v2
## [1,]  1  5
## [2,]  2  6
## [3,]  3  7
## [4,]  4  8</code></pre>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">=</span> <span class="dv">9</span><span class="sc">:</span><span class="dv">12</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(m1, v3)</span></code></pre></div>
<pre><code>##      v1 v2 v3
## [1,]  1  5  9
## [2,]  2  6 10
## [3,]  3  7 11
## [4,]  4  8 12</code></pre>
</div>
<div id="행이름-및-열이름-추가하기" class="section level2" number="8.3">
<h2 number="8.3"><span class="header-section-number">8.3</span> 행이름 및 열이름 추가하기</h2>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>m2 <span class="ot">=</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a>m2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    1    5    9
## [2,]    2    6   10
## [3,]    3    7   11
## [4,]    4    8   12</code></pre>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(m2) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;row1&#39;</span>, <span class="st">&#39;row2&#39;</span>, <span class="st">&#39;row3&#39;</span>, <span class="st">&#39;row4&#39;</span>)</span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a>m2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## row1    1    5    9
## row2    2    6   10
## row3    3    7   11
## row4    4    8   12</code></pre>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(m2) <span class="ot">=</span> <span class="fu">c</span>(<span class="st">&#39;col1&#39;</span>, <span class="st">&#39;col2&#39;</span> ,<span class="st">&#39;col3&#39;</span>)</span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>m2</span></code></pre></div>
<pre><code>##      col1 col2 col3
## row1    1    5    9
## row2    2    6   10
## row3    3    7   11
## row4    4    8   12</code></pre>
<p><code>rownames()</code>와 <code>colnames()</code> 함수를 이용해 행 및 열이름을 직접 지정할 수 있습니다.</p>
</div>
<div id="행렬-추출하기" class="section level2" number="8.4">
<h2 number="8.4"><span class="header-section-number">8.4</span> 행렬 추출하기</h2>
<p>행렬 역시 대괄호를 이용해 데이터를 추출할 수 있으며, 공백으로 둘시 모든 행(열)을 선택하게 됩니다.</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a>m2</span></code></pre></div>
<pre><code>##      col1 col2 col3
## row1    1    5    9
## row2    2    6   10
## row3    3    7   11
## row4    4    8   12</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>m2[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, ]</span></code></pre></div>
<pre><code>##      col1 col2 col3
## row1    1    5    9
## row2    2    6   10</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a>m2[ , <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>##      col1 col3
## row1    1    9
## row2    2   10
## row3    3   11
## row4    4   12</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a>m2[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)]</span></code></pre></div>
<pre><code>##      col1 col3
## row1    1    9
## row2    2   10</code></pre>
<p>만일 하나의 열만 선택시 결과가 벡터 형태로 출력되며, drop = FALSE 인자를 추가해주면 행렬의 형태가 유지되어 출력됩니다.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a>m2[, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## row1 row2 row3 row4 
##    5    6    7    8</code></pre>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a>m2[, <span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code></pre></div>
<pre><code>##      col2
## row1    5
## row2    6
## row3    7
## row4    8</code></pre>
<!--chapter:end:matrix.Rmd-->
</div>
</div>
<div id="data-frame" class="section level1" number="9">
<h1 number="9"><span class="header-section-number">9</span> Data Frame</h1>
<p>데이터프레임은 R에서 가장 널리 사용되는 형식으로써, 각 컬럼이 다른 클래스를 가질 수 있습니다.</p>
<div id="데이터프레임-생성하기" class="section level2" number="9.1">
<h2 number="9.1"><span class="header-section-number">9.1</span> 데이터프레임 생성하기</h2>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">col1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col3 =</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col4 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, pi))</span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  4 variables:
##  $ col1: int  1 2 3
##  $ col2: chr  &quot;this&quot; &quot;is&quot; &quot;text&quot;
##  $ col3: logi  TRUE FALSE TRUE
##  $ col4: num  2.5 4.2 3.14</code></pre>
<p>col1은 숫자, col2는 팩터, col3는 논리연산자, col4는 숫자로 구성되어 있습니다. R에서는 문자형식을 자동으로 팩터로 인식하며, 이를 원하지 않을 경우 <code>stringsAsFactors = FALSE</code>를 입력합니다.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">col1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col3 =</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col4 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, pi),</span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(df)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  4 variables:
##  $ col1: int  1 2 3
##  $ col2: chr  &quot;this&quot; &quot;is&quot; &quot;text&quot;
##  $ col3: logi  TRUE FALSE TRUE
##  $ col4: num  2.5 4.2 3.14</code></pre>
<p>또한 벡터 혹은 리스트를 이용해 데이터프레임을 생성할 수도 있습니다.</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">=</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>)</span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a>v3 <span class="ot">=</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>)</span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-5"><a href="#cb253-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span> (<span class="at">col1 =</span> v1, <span class="at">col2 =</span> v2, <span class="at">col3 =</span> v3)</span></code></pre></div>
<pre><code>##   col1 col2  col3
## 1    1 this  TRUE
## 2    2   is FALSE
## 3    3 text  TRUE</code></pre>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a>l <span class="ot">=</span> <span class="fu">list</span> (<span class="at">item1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>,</span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">item2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb255-3"><a href="#cb255-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">item3 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, <span class="fl">5.1</span>))</span>
<span id="cb255-4"><a href="#cb255-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-5"><a href="#cb255-5" aria-hidden="true" tabindex="-1"></a>l</span></code></pre></div>
<pre><code>## $item1
## [1] 1 2 3
## 
## $item2
## [1] &quot;this&quot; &quot;is&quot;   &quot;text&quot;
## 
## $item3
## [1] 2.5 4.2 5.1</code></pre>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.data.frame</span> (l)</span></code></pre></div>
<pre><code>##   item1 item2 item3
## 1     1  this   2.5
## 2     2    is   4.2
## 3     3  text   5.1</code></pre>
</div>
<div id="기존-데이터프레임에-데이터-추가하기" class="section level2" number="9.2">
<h2 number="9.2"><span class="header-section-number">9.2</span> 기존 데이터프레임에 데이터 추가하기</h2>
<p><code>cbind()</code> 함수를 통해 기존 데이터프레임에 새로운 열을 추가할 수 있습니다.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   col1 col2  col3  col4
## 1    1 this  TRUE 2.500
## 2    2   is FALSE 4.200
## 3    3 text  TRUE 3.142</code></pre>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a>v4 <span class="ot">=</span> <span class="fu">c</span> (<span class="st">&quot;A&quot;</span>, <span class="st">&quot;B&quot;</span>, <span class="st">&quot;C&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cbind</span>(df, v4)</span></code></pre></div>
<pre><code>##   col1 col2  col3  col4 v4
## 1    1 this  TRUE 2.500  A
## 2    2   is FALSE 4.200  B
## 3    3 text  TRUE 3.142  C</code></pre>
<p><code>rbind()</code> 함수를 사용할 경우 새로운 행을 추가할 수 있습니다. 주의할 점은 각 행의 클래스가 기존 데이터와 일치해야 합니다.</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a>v5 <span class="ot">=</span> <span class="fu">c</span> (<span class="dv">4</span>, <span class="st">&quot;R&quot;</span>, F, <span class="fl">1.1</span>)</span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rbind</span>(df, v5)</span></code></pre></div>
<pre><code>##   col1 col2  col3             col4
## 1    1 this  TRUE              2.5
## 2    2   is FALSE              4.2
## 3    3 text  TRUE 3.14159265358979
## 4    4    R FALSE              1.1</code></pre>
</div>
<div id="데이터프레임추출하기" class="section level2" number="9.3">
<h2 number="9.3"><span class="header-section-number">9.3</span> 데이터프레임추출하기</h2>
<p>데이터프레임 역시 대괄호를 이용해 데이터를 추출할 수 있으며, 공백으로 둘시 모든 행(열)을 선택하게 됩니다.</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   col1 col2  col3  col4
## 1    1 this  TRUE 2.500
## 2    2   is FALSE 4.200
## 3    3 text  TRUE 3.142</code></pre>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a>df[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, ]</span></code></pre></div>
<pre><code>##   col1 col2  col3  col4
## 2    2   is FALSE 4.200
## 3    3 text  TRUE 3.142</code></pre>
<p>컬럼 이름을 통해 데이터를 선택할 수도있습니다.</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a>df[ , <span class="fu">c</span>(<span class="st">&#39;col2&#39;</span>, <span class="st">&#39;col4&#39;</span>)]</span></code></pre></div>
<pre><code>##   col2  col4
## 1 this 2.500
## 2   is 4.200
## 3 text 3.142</code></pre>
<p>만일 하나의 열만 선택시 결과가 벡터 형태로 출력되며, drop = FALSE 인자를 추가해주면 데이터프레임의 형태가 유지되어 출력됩니다.</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] &quot;this&quot; &quot;is&quot;   &quot;text&quot;</code></pre>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a>df[, <span class="dv">2</span>, drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span></code></pre></div>
<pre><code>##   col2
## 1 this
## 2   is
## 3 text</code></pre>
<!--chapter:end:dataframe.Rmd-->
</div>
</div>
<div id="missing-value" class="section level1" number="10">
<h1 number="10"><span class="header-section-number">10</span> Missing Value</h1>
<p>데이터 분석에서 결측치를 처리하는 것은 매우 중요하며, R에서 결측치는 <code>NA</code>로 표시됩니다.</p>
<div id="결측치-테스트" class="section level2" number="10.1">
<h2 number="10.1"><span class="header-section-number">10.1</span> 결측치 테스트</h2>
<p><code>is.na()</code> 함수를 통해 결측치 여부를 확인할 수 있습니다.</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="cn">NA</span>, <span class="dv">6</span><span class="sc">:</span><span class="dv">7</span>, <span class="cn">NA</span>)</span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  1  2  3  4 NA  6  7 NA</code></pre>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(x)</span></code></pre></div>
<pre><code>## [1] FALSE FALSE FALSE FALSE  TRUE FALSE FALSE  TRUE</code></pre>
<p>NA의 경우 TRUE, 그렇지 않을 경우 FALSE를 반환합니다.</p>
<div class="sourceCode" id="cb280"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">col1 =</span> <span class="fu">c</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="cn">NA</span>),</span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="cn">NA</span>,<span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col3 =</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col4 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, <span class="fl">3.2</span>, <span class="cn">NA</span>),</span>
<span id="cb280-5"><a href="#cb280-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb280-6"><a href="#cb280-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb280-7"><a href="#cb280-7" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   col1 col2  col3 col4
## 1    1 this  TRUE  2.5
## 2    2 &lt;NA&gt; FALSE  4.2
## 3    3   is  TRUE  3.2
## 4   NA text  TRUE   NA</code></pre>
<div class="sourceCode" id="cb282"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.na</span>(df)</span></code></pre></div>
<pre><code>##       col1  col2  col3  col4
## [1,] FALSE FALSE FALSE FALSE
## [2,] FALSE  TRUE FALSE FALSE
## [3,] FALSE FALSE FALSE FALSE
## [4,]  TRUE FALSE FALSE  TRUE</code></pre>
<div class="sourceCode" id="cb284"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="fu">which</span>(<span class="fu">is.na</span>(df))</span></code></pre></div>
<pre><code>## [1]  4  6 16</code></pre>
<p>데이터프레임 역시 <code>is.na()</code> 함수를 적용할 수 있으며, <code>which()</code> 함수를 통해 NA 데이터의 위치를 찾을 수도 있습니다.</p>
</div>
<div id="결측치-제거" class="section level2" number="10.2">
<h2 number="10.2"><span class="header-section-number">10.2</span> 결측치 제거</h2>
<div id="평균값-대체" class="section level3" number="10.2.1">
<h3 number="10.2.1"><span class="header-section-number">10.2.1</span> 평균값 대체</h3>
<div class="sourceCode" id="cb286"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="dv">4</span>)</span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a>y</span></code></pre></div>
<pre><code>## [1]  1  3 NA  4</code></pre>
<div class="sourceCode" id="cb288"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(y)</span></code></pre></div>
<pre><code>## [1] NA</code></pre>
<p>데이터에 결측치가 존재하면, 일반적인 연산함수의 결과로 NA를 반환합니다.</p>
<div class="sourceCode" id="cb290"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>## [1] 2.667</code></pre>
<p>na.rm = TRUE를 추가해주면, NA 데이터를 제외한 나머지 데이터를 대상으로 연산을 합니다.</p>
</div>
<div id="데이터-제거" class="section level3" number="10.2.2">
<h3 number="10.2.2"><span class="header-section-number">10.2.2</span> 데이터 제거</h3>
<p>결측치가 있는 데이터를 삭제해 주는 경우도 있습니다.</p>
<div class="sourceCode" id="cb292"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span> (<span class="at">col1 =</span> <span class="fu">c</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>, <span class="cn">NA</span>),</span>
<span id="cb292-2"><a href="#cb292-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col2 =</span> <span class="fu">c</span> (<span class="st">&quot;this&quot;</span>, <span class="cn">NA</span>,<span class="st">&quot;is&quot;</span>, <span class="st">&quot;text&quot;</span>),</span>
<span id="cb292-3"><a href="#cb292-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col3 =</span> <span class="fu">c</span> (<span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>),</span>
<span id="cb292-4"><a href="#cb292-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">col4 =</span> <span class="fu">c</span> (<span class="fl">2.5</span>, <span class="fl">4.2</span>, <span class="fl">3.2</span>, <span class="cn">NA</span>),</span>
<span id="cb292-5"><a href="#cb292-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb292-6"><a href="#cb292-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb292-7"><a href="#cb292-7" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##   col1 col2  col3 col4
## 1    1 this  TRUE  2.5
## 2    2 &lt;NA&gt; FALSE  4.2
## 3    3   is  TRUE  3.2
## 4   NA text  TRUE   NA</code></pre>
<p>2행과 4행에 NA 데이터가 존재합니다.</p>
<div class="sourceCode" id="cb294"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1" aria-hidden="true" tabindex="-1"></a><span class="fu">na.omit</span>(df)</span></code></pre></div>
<pre><code>##   col1 col2 col3 col4
## 1    1 this TRUE  2.5
## 3    3   is TRUE  3.2</code></pre>
<p><code>na.omit()</code> 함수를 이용해 NA가 존재하는 행을 삭제해주도록 합니다.</p>
</div>
</div>
<div id="결측치-대체" class="section level2" number="10.3">
<h2 number="10.3"><span class="header-section-number">10.3</span> 결측치 대체</h2>
<p>결측치가 존재할 경우 평균값을 대신 사용하기도 합니다.</p>
<div class="sourceCode" id="cb296"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1]  1  2  3  4 NA  6  7 NA</code></pre>
<div class="sourceCode" id="cb298"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1" aria-hidden="true" tabindex="-1"></a>x[<span class="fu">is.na</span>(x)] <span class="ot">=</span> <span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb298-2"><a href="#cb298-2" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 1.000 2.000 3.000 4.000 3.833 6.000 7.000 3.833</code></pre>
<p>결측치 대신 나머지 값들의 평균인 3.833을 대체하였습니다.</p>
<!--chapter:end:missing-value.Rmd-->
</div>
</div>
<div id="part-데이터-불러오기-및-내보내기" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) 데이터 불러오기 및 내보내기</h1>
</div>
<div id="import-data" class="section level1" number="11">
<h1 number="11"><span class="header-section-number">11</span> Import Data</h1>
<p>데이터 분석의 첫번째 단계는 데이터를 불러오는 것이며, 일반적으로 텍스트 혹은 엑셀 파일로 저장된 데이터를 사용합니다.</p>
<p>아래와 같은 데이터가 각각 csv, excel, RDS 파일로 저장된 예제를 살펴보겠습니다.</p>
<pre><code>variable 1, variable 2, variable 3
10,beer,TRUE
25,wine,TRUE
8,cheese,FALSE</code></pre>
<p>해당 파일의 주소는 다음과 같습니다.</p>
<pre><code>csv: https://github.com/hyunyulhenry/data_wrangling/blob/master/mydata.csv
txt: https://github.com/hyunyulhenry/data_wrangling/blob/master/mydata.txt
excel: https://github.com/hyunyulhenry/data_wrangling/blob/master/mydata.xlsx
rds: https://github.com/hyunyulhenry/data_wrangling/blob/master/mydata.rds</code></pre>
<p>먼저 다음 코드를 이용해 해당 파일들을 다운로드 받도록 합니다.</p>
<div class="sourceCode" id="cb302"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&#39;https://raw.githubusercontent.com/hyunyulhenry/data_wrangling/master/mydata.csv&#39;</span>, <span class="st">&#39;mydata.csv&#39;</span>)</span>
<span id="cb302-2"><a href="#cb302-2" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&#39;https://raw.githubusercontent.com/hyunyulhenry/data_wrangling/master/mydata.txt&#39;</span>, <span class="st">&#39;mydata.txt&#39;</span>)</span>
<span id="cb302-3"><a href="#cb302-3" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&#39;https://github.com/hyunyulhenry/data_wrangling/raw/master/mydata.xlsx&#39;</span>,<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;wb&#39;</span>)</span>
<span id="cb302-4"><a href="#cb302-4" aria-hidden="true" tabindex="-1"></a><span class="fu">download.file</span>(<span class="st">&#39;https://github.com/hyunyulhenry/data_wrangling/raw/master/mydata.rds&#39;</span>,<span class="st">&#39;mydata.rds&#39;</span>)</span></code></pre></div>
<div id="csv-파일-불러오기" class="section level2" number="11.1">
<h2 number="11.1"><span class="header-section-number">11.1</span> csv 파일 불러오기</h2>
<p>먼저 R의 기본함수와 <code>readr</code> 패키지를 이용하여 csv 파일을 불러오는 법에 대해 살펴보겠습니다.</p>
<div id="기본함수" class="section level3" number="11.1.1">
<h3 number="11.1.1"><span class="header-section-number">11.1.1</span> 기본함수</h3>
<p><code>read.table()</code> 함수는 데이터를 불러오는 R의 가장 기본인 함수며, <code>read.csv()</code>와 <code>read.delim()</code> 함수는 특수한 경우의 래퍼 함수라 볼 수 있습니다.</p>
<div class="sourceCode" id="cb303"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&#39;mydata.csv&#39;</span>)</span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a>mydata</span></code></pre></div>
<pre><code>##   variable.1 variable.2 variable.3
## 1         10       beer       TRUE
## 2         25       wine       TRUE
## 3          8     cheese      FALSE</code></pre>
<div class="sourceCode" id="cb305"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  3 variables:
##  $ variable.1: int  10 25 8
##  $ variable.2: chr  &quot;beer&quot; &quot;wine&quot; &quot;cheese&quot;
##  $ variable.3: logi  TRUE TRUE FALSE</code></pre>
<p>먼저 열이름인 variable 다음에 점(.)이 붙은 것이 확인됩니다. 이처럼 기본함수를 사용할 경우 열 이름의 공백은 점으로 바뀌게 됩니다.</p>
<p>또한 variable 2의 문자열이 자동으로 팩터 형태로 바뀌게 되었습니다. 이를 방지하기 위해서는 stringAsFactors를 FALSE로 지정해주어야 합니다.</p>
<div class="sourceCode" id="cb307"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a>mydata2 <span class="ot">=</span> <span class="fu">read.csv</span>(<span class="st">&#39;mydata.csv&#39;</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata2)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  3 variables:
##  $ variable.1: int  10 25 8
##  $ variable.2: chr  &quot;beer&quot; &quot;wine&quot; &quot;cheese&quot;
##  $ variable.3: logi  TRUE TRUE FALSE</code></pre>
<p><code>read.table()</code> 함수를 이용하여 csv 데이터를 불러올 수도 있습니다.</p>
<div class="sourceCode" id="cb309"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">&#39;mydata.csv&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;,&#39;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>##   variable.1 variable.2 variable.3
## 1         10       beer       TRUE
## 2         25       wine       TRUE
## 3          8     cheese      FALSE</code></pre>
<p>구분자에 해당하는 sep를 ’,’로 지정해 주며, 열이름에 해당하는 header를 TRUE로 지정해줍니다.</p>
<div class="sourceCode" id="cb311"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">&#39;mydata.csv&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;,&#39;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>,</span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">&#39;Row 1&#39;</span>, <span class="st">&#39;Row 2&#39;</span>, <span class="st">&#39;Row 3&#39;</span>),</span>
<span id="cb311-3"><a href="#cb311-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">col.names =</span> <span class="fu">c</span>(<span class="st">&#39;Var 1&#39;</span>, <span class="st">&#39;Var 2&#39;</span>, <span class="st">&#39;Var 3&#39;</span>))</span></code></pre></div>
<pre><code>##       Var.1  Var.2 Var.3
## Row 1    10   beer  TRUE
## Row 2    25   wine  TRUE
## Row 3     8 cheese FALSE</code></pre>
<p>row.names와 col.names 인자를 통해 행 및 열이름을 직접 지정할 수도 있습니다.</p>
<div class="sourceCode" id="cb313"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb313-1"><a href="#cb313-1" aria-hidden="true" tabindex="-1"></a>set_classes <span class="ot">=</span> <span class="fu">read.table</span>(<span class="st">&#39;mydata.csv&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;,&#39;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>,</span>
<span id="cb313-2"><a href="#cb313-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">colClasses =</span> <span class="fu">c</span>(<span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;character&#39;</span>, <span class="st">&#39;character&#39;</span>))</span>
<span id="cb313-3"><a href="#cb313-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(set_classes)</span></code></pre></div>
<pre><code>## &#39;data.frame&#39;:    3 obs. of  3 variables:
##  $ variable.1: num  10 25 8
##  $ variable.2: chr  &quot;beer&quot; &quot;wine&quot; &quot;cheese&quot;
##  $ variable.3: chr  &quot;TRUE&quot; &quot;TRUE&quot; &quot;FALSE&quot;</code></pre>
<p>colClasses 인자를 통해 각 열에 해당하는 클래스를 직접 지정해줄 수도 있으며, 2번째 열이 팩터가 아닌 문자 형태로 입력됩니다.</p>
<div class="sourceCode" id="cb315"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb315-1"><a href="#cb315-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">&#39;mydata.csv&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;,&#39;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">nrows =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##   variable.1 variable.2 variable.3
## 1         10       beer       TRUE
## 2         25       wine       TRUE</code></pre>
<p>nrows 인자를 통해 전체 데이터가 아닌 지정한 행까지의 데이터만 불러올 수도 있습니다.</p>
</div>
<div id="readr-패키지" class="section level3" number="11.1.2">
<h3 number="11.1.2"><span class="header-section-number">11.1.2</span> <code>readr</code> 패키지</h3>
<p>기본 함수 대비 readr 패키지를 이용할 경우 10배 정도 빠르게 데이터를 불러올 수 있습니다.</p>
<div class="sourceCode" id="cb317"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a>mydata3 <span class="ot">=</span> <span class="fu">read_csv</span>(<span class="st">&#39;mydata.csv&#39;</span>)</span>
<span id="cb317-3"><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata3)</span></code></pre></div>
<pre><code>## spec_tbl_df [3 x 3] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
##  $ variable 1: num [1:3] 10 25 8
##  $ variable 2: chr [1:3] &quot;beer&quot; &quot;wine&quot; &quot;cheese&quot;
##  $ variable 3: logi [1:3] TRUE TRUE FALSE
##  - attr(*, &quot;spec&quot;)=
##   .. cols(
##   ..   `variable 1` = col_double(),
##   ..   `variable 2` = col_character(),
##   ..   `variable 3` = col_logical()
##   .. )
##  - attr(*, &quot;problems&quot;)=&lt;externalptr&gt;</code></pre>
<p><code>read_csv()</code> 함수를 이용해 csv 파일을 불러올 수 있습니다. 열이름의 공백이 그대로 유지되며, 문자 형태 역시 팩터가 아닌 원래 형식이 그대로 유지됩니다.</p>
<div class="sourceCode" id="cb319"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&#39;mydata.csv&#39;</span>, <span class="at">col_types =</span> <span class="fu">list</span>(<span class="fu">col_double</span>(),</span>
<span id="cb319-2"><a href="#cb319-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">col_character</span>(),</span>
<span id="cb319-3"><a href="#cb319-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="fu">col_character</span>()))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   `variable 1` `variable 2` `variable 3`
##          &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;       
## 1           10 beer         TRUE        
## 2           25 wine         TRUE        
## 3            8 cheese       FALSE</code></pre>
<p>col_types 인자를 통해 원하는 타입을 직접 입력할 수도 있습니다.</p>
<div class="sourceCode" id="cb321"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&#39;mydata.csv&#39;</span>, <span class="at">col_names =</span> <span class="fu">c</span>(<span class="st">&#39;Var 1&#39;</span>, <span class="st">&#39;Var 2&#39;</span>, <span class="st">&#39;Var 3&#39;</span>),</span>
<span id="cb321-2"><a href="#cb321-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">skip =</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   `Var 1` `Var 2` `Var 3`
##     &lt;dbl&gt; &lt;chr&gt;   &lt;lgl&gt;  
## 1      10 beer    TRUE   
## 2      25 wine    TRUE   
## 3       8 cheese  FALSE</code></pre>
<p>col_names 인자를 통해 열이름을 입력할 수 있으며, skip을 통해 위에서 n번째 행을 건너뛰고 데이터를 불러올 수 있습니다.</p>
<div class="sourceCode" id="cb323"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_csv</span>(<span class="st">&#39;mydata.csv&#39;</span>, <span class="at">n_max =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 x 3
##   `variable 1` `variable 2` `variable 3`
##          &lt;dbl&gt; &lt;chr&gt;        &lt;lgl&gt;       
## 1           10 beer         TRUE        
## 2           25 wine         TRUE</code></pre>
<p>n_max 인자를 통해 전체 데이터가 아닌 지정한 행까지의 데이터만 불러올 수도 있습니다.</p>
</div>
</div>
<div id="텍스트-파일-불러오기" class="section level2" number="11.2">
<h2 number="11.2"><span class="header-section-number">11.2</span> 텍스트 파일 불러오기</h2>
<p><code>.txt</code> 파일로 저장된 텍스트 파일 역시 <code>read.delim()</code> 혹은 <code>read.table()</code> 함수를 이용해 불러올 수 있습니다.</p>
<div class="sourceCode" id="cb325"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.delim</span>(<span class="st">&#39;mydata.txt&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;,&#39;</span>)</span></code></pre></div>
<pre><code>##   variable.1 variable.2 variable.3
## 1         10       beer       TRUE
## 2         25       wine       TRUE
## 3          8     cheese      FALSE</code></pre>
<div class="sourceCode" id="cb327"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.table</span>(<span class="st">&#39;mydata.txt&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;,&#39;</span>, <span class="at">header =</span> <span class="cn">TRUE</span>)</span></code></pre></div>
<pre><code>##   variable.1 variable.2 variable.3
## 1         10       beer       TRUE
## 2         25       wine       TRUE
## 3          8     cheese      FALSE</code></pre>
</div>
<div id="엑셀-파일-불러오기" class="section level2" number="11.3">
<h2 number="11.3"><span class="header-section-number">11.3</span> 엑셀 파일 불러오기</h2>
<p>엑셀 파일을 불러오기 위한 패키지는 매우 많으며, 이 중 <code>xlsx</code>와 <code>readxl</code> 패키지를 살펴보도록 하겠습니다.</p>
<div id="openxlsx-패키지" class="section level3" number="11.3.1">
<h3 number="11.3.1"><span class="header-section-number">11.3.1</span> <code>openxlsx</code> 패키지</h3>
<p><code>openxlsx</code> 패캐지의 <code>read.xlsx()</code> 함수를 이용해 엑셀 데이터를 불러올 수 있습니다.</p>
<div class="sourceCode" id="cb329"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb329-2"><a href="#cb329-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb329-3"><a href="#cb329-3" aria-hidden="true" tabindex="-1"></a><span class="fu">read.xlsx</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet1&#39;</span>)</span></code></pre></div>
<pre><code>##   variable.1 variable.2 variable.3
## 1         10       beer       TRUE
## 2         25       wine       TRUE
## 3          8     cheese      FALSE</code></pre>
<div class="sourceCode" id="cb331"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.xlsx</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet2&#39;</span>)</span></code></pre></div>
<pre><code>##   variable.4 variable.5
## 1     Dayton     johnny
## 2   Columbus      amber
## 3  Cleveland       tony
## 4 Cincinnati      alice</code></pre>
<p>엑셀은 여러 시트로 구성되어 있으므로, sheet 인자를 통해 원하는 시트명의 내용만 불러올 수 있습니다.</p>
<div class="sourceCode" id="cb333"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.xlsx</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet3&#39;</span>)</span></code></pre></div>
<pre><code>##                                          Header.Company.A         X2
## 1 What if we want to disregard header text in Excel file?       &lt;NA&gt;
## 2                                              variable 6 variable 7
## 3                                                     200       Male
## 4                                                     225     Female
## 5                                                     400     Female
## 6                                                     310       Male</code></pre>
<p>간혹 엑셀 파일에는 데이터가 아닌 설명을 위한 텍스트가 적힌 경우도 있으므로, 이를 제외하고 데이터를 불러올 필요가 있습니다.</p>
<div class="sourceCode" id="cb335"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.xlsx</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet3&#39;</span>, <span class="at">startRow =</span> <span class="dv">3</span>)</span></code></pre></div>
<pre><code>##   variable.6 variable.7
## 1        200       Male
## 2        225     Female
## 3        400     Female
## 4        310       Male</code></pre>
<p>startRow 인자를 통해 3번째 행부터 데이터를 불러오게 되어, 불필요한 텍스트가 제거되었습니다.</p>
<div class="sourceCode" id="cb337"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read.xlsx</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet3&#39;</span>, <span class="at">rows =</span> <span class="dv">3</span><span class="sc">:</span><span class="dv">5</span>)</span></code></pre></div>
<pre><code>##   variable.6 variable.7
## 1        200       Male
## 2        225     Female</code></pre>
<p>rowIndex 인자를 통해 원하는 행의 데이터만 불러올 수 있습니다.</p>
</div>
<div id="readxl-패키지" class="section level3" number="11.3.2">
<h3 number="11.3.2"><span class="header-section-number">11.3.2</span> <code>readxl</code> 패키지</h3>
<p><code>readxl</code> 패키지는 <code>readr</code> 패키지와 거의 비슷하며, C++을 기반으로 하여 매우 빠른 속도를 자랑합니다.</p>
<div class="sourceCode" id="cb339"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb339-2"><a href="#cb339-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb339-3"><a href="#cb339-3" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">=</span> <span class="fu">read_excel</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet5&#39;</span>)</span>
<span id="cb339-4"><a href="#cb339-4" aria-hidden="true" tabindex="-1"></a>mydata</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   `Variable 1` `Variable 2` `Variable 3` `Variable 4`        `Variable 5`       
##          &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;dttm&gt;              &lt;dttm&gt;             
## 1           10 beer                    1 2015-11-20 00:00:00 2015-11-20 13:30:00
## 2           25 wine                    1 NA                  2015-11-21 16:30:00
## 3            8 &lt;NA&gt;                    0 2015-11-22 00:00:00 2015-11-22 14:45:00</code></pre>
<div class="sourceCode" id="cb341"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(mydata)</span></code></pre></div>
<pre><code>## tibble [3 x 5] (S3: tbl_df/tbl/data.frame)
##  $ Variable 1: num [1:3] 10 25 8
##  $ Variable 2: chr [1:3] &quot;beer&quot; &quot;wine&quot; NA
##  $ Variable 3: num [1:3] 1 1 0
##  $ Variable 4: POSIXct[1:3], format: &quot;2015-11-20&quot; NA &quot;2015-11-22&quot;
##  $ Variable 5: POSIXct[1:3], format: &quot;2015-11-20 13:30:00&quot; &quot;2015-11-21 16:30:00&quot; &quot;2015-11-22 14:45:00&quot;</code></pre>
<p><code>read_excel()</code> 함수 역시 sheet 인자를 통해 원하는 시트의 데이터를 불러올 수 있습니다. 빈 칸의 경우 결측치(NA)로 변형되며, 날짜의 경우 POSIXct 형식으로 불러옵니다.</p>
<div class="sourceCode" id="cb343"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet5&#39;</span>, <span class="at">skip =</span> <span class="dv">1</span>,</span>
<span id="cb343-2"><a href="#cb343-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_names =</span> <span class="fu">paste</span>(<span class="st">&#39;Var&#39;</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   `Var 1` `Var 2` `Var 3` `Var 4`             `Var 5`            
##     &lt;dbl&gt; &lt;chr&gt;     &lt;dbl&gt; &lt;dttm&gt;              &lt;dttm&gt;             
## 1      10 beer          1 2015-11-20 00:00:00 2015-11-20 13:30:00
## 2      25 wine          1 NA                  2015-11-21 16:30:00
## 3       8 &lt;NA&gt;          0 2015-11-22 00:00:00 2015-11-22 14:45:00</code></pre>
<p>skip 인자를 통해 위에서 n 번째까지 행을 건너뛸 수 있으며, col_names 인자를 통해 원하는 열이름을 직접 입력할 수 있습니다.</p>
<p>간혹 결측치가 NA가 아닌 999와 같은 특정 값으로 입력되는 경우도 있으므로, 이를 찾아 NA로 변형해주어야 합니다.</p>
<div class="sourceCode" id="cb345"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet6&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   `variable 1` `variable 2` `variable 3` `variable 4`
##          &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;        &lt;dbl&gt;
## 1           10 beer                    3        42328
## 2           25 wine                    1          999
## 3            8 999                     0        42330</code></pre>
<div class="sourceCode" id="cb347"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet6&#39;</span>, <span class="at">na =</span> <span class="st">&#39;999&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 4
##   `variable 1` `variable 2` `variable 3` `variable 4`
##          &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt;        &lt;dbl&gt;
## 1           10 beer                    3        42328
## 2           25 wine                    1           NA
## 3            8 &lt;NA&gt;                    0        42330</code></pre>
<p>NA로 지정하고 싶은 값을 직접 입력할 수 있습니다.</p>
<div class="sourceCode" id="cb349"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet5&#39;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 5
##   `Variable 1` `Variable 2` `Variable 3` `Variable 4`        `Variable 5`       
##          &lt;dbl&gt; &lt;chr&gt;               &lt;dbl&gt; &lt;dttm&gt;              &lt;dttm&gt;             
## 1           10 beer                    1 2015-11-20 00:00:00 2015-11-20 13:30:00
## 2           25 wine                    1 NA                  2015-11-21 16:30:00
## 3            8 &lt;NA&gt;                    0 2015-11-22 00:00:00 2015-11-22 14:45:00</code></pre>
<div class="sourceCode" id="cb351"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb351-1"><a href="#cb351-1" aria-hidden="true" tabindex="-1"></a><span class="fu">read_excel</span>(<span class="st">&#39;mydata.xlsx&#39;</span>, <span class="at">sheet =</span> <span class="st">&#39;Sheet5&#39;</span>,</span>
<span id="cb351-2"><a href="#cb351-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">col_type =</span> <span class="fu">c</span>(<span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;blank&#39;</span>, <span class="st">&#39;numeric&#39;</span>, <span class="st">&#39;blank&#39;</span>, <span class="st">&#39;date&#39;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   `Variable 1` `Variable 3` `Variable 5`       
##          &lt;dbl&gt;        &lt;dbl&gt; &lt;dttm&gt;             
## 1           10            1 2015-11-20 13:30:00
## 2           25            1 2015-11-21 16:30:00
## 3            8            0 2015-11-22 14:45:00</code></pre>
<p>col_types 인자를 통해 원하는 클래스를 직접 입력할 수 있으며, blank를 입력할 경우 해당 셀은 불러오지 않습니다.</p>
</div>
</div>
<div id="r-object-file" class="section level2" number="11.4">
<h2 number="11.4"><span class="header-section-number">11.4</span> R object File</h2>
<p>R을 통해 작업한 내용을 csv나 excel 파일이 아닌 Rdata/object 형식(.RData, .rda, .rds)으로 저장하여 공유하는 경우가 있습니다.</p>
<div class="sourceCode" id="cb353"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1" aria-hidden="true" tabindex="-1"></a><span class="fu">readRDS</span>(<span class="st">&#39;mydata.rds&#39;</span>)</span></code></pre></div>
<pre><code>##           V1         V2         V3
## 1 variable 1 variable 2 variable 3
## 2         10       beer       TRUE
## 3         25       wine       TRUE
## 4          8     cheese      FALSE</code></pre>
<p>각 파일 형식에 따라 <code>load('mydata.RData)</code>, <code>load(file = 'mydata.rda)</code>, <code>readRDS(mydata.rds)</code>와 같은 형태로 데이터를 불러올 수 있습니다.</p>
<!--chapter:end:import-data.Rmd-->
</div>
</div>
<div id="exporting-data" class="section level1" number="12">
<h1 number="12"><span class="header-section-number">12</span> Exporting Data</h1>
<p>작업을 마무리 했으면 csv, excel, rds 등의 형태로 데이터를 저장해야 합니다.</p>
<div id="텍스트-csv-파일-저장하기" class="section level2" number="12.1">
<h2 number="12.1"><span class="header-section-number">12.1</span> 텍스트, csv 파일 저장하기</h2>
<p>먼저 R의 기본함수와 <code>readr</code> 패키지를 이용하여 텍스트 파일과 csv 파일로 저장하는 법에 대해 살펴보겠습니다. 먼저 다음과 같이 예제로 사용될 데이터프레임을 만들도록 합니다.</p>
<div class="sourceCode" id="cb355"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1" aria-hidden="true" tabindex="-1"></a>df <span class="ot">=</span> <span class="fu">data.frame</span>(<span class="at">var1 =</span> <span class="fu">c</span>(<span class="dv">10</span>, <span class="dv">25</span>, <span class="dv">8</span>),</span>
<span id="cb355-2"><a href="#cb355-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">var2 =</span> <span class="fu">c</span>(<span class="st">&#39;beer&#39;</span>, <span class="st">&#39;wine&#39;</span>, <span class="st">&#39;cheese&#39;</span>),</span>
<span id="cb355-3"><a href="#cb355-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">var3 =</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>),</span>
<span id="cb355-4"><a href="#cb355-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">row.names =</span> <span class="fu">c</span>(<span class="st">&#39;billy&#39;</span>, <span class="st">&#39;bob&#39;</span>, <span class="st">&#39;thornton&#39;</span>))</span>
<span id="cb355-5"><a href="#cb355-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb355-6"><a href="#cb355-6" aria-hidden="true" tabindex="-1"></a>df</span></code></pre></div>
<pre><code>##          var1   var2  var3
## billy      10   beer  TRUE
## bob        25   wine  TRUE
## thornton    8 cheese FALSE</code></pre>
<div id="기본함수-1" class="section level3" number="12.1.1">
<h3 number="12.1.1"><span class="header-section-number">12.1.1</span> 기본함수</h3>
<p><code>write.csv()</code> 함수를 통해 csv 파일로 저장할 수 있습니다.</p>
<div class="sourceCode" id="cb357"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(df, <span class="at">file =</span> <span class="st">&#39;export.csv&#39;</span>)</span></code></pre></div>
<p><code>write.delim()</code> 함수를 사용하여 텍스트 파일로 저장할 수 있습니다.</p>
<div class="sourceCode" id="cb358"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(df, <span class="at">file =</span> <span class="st">&#39;export.txt&#39;</span>, <span class="at">sep =</span> <span class="st">&#39;</span><span class="sc">\t</span><span class="st">&#39;</span>)</span></code></pre></div>
<p>sep를 통해 탭을 구분자로 지정하였습니다.</p>
</div>
<div id="readr-패키지-1" class="section level3" number="12.1.2">
<h3 number="12.1.2"><span class="header-section-number">12.1.2</span> <code>readr</code> 패키지</h3>
<p><code>readr</code> 패키지의 경우 기본 함수에 비해 2배 이상 빠르며, 행 이름을 저장하지 않습니다.</p>
<div class="sourceCode" id="cb359"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb359-2"><a href="#cb359-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb359-3"><a href="#cb359-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(df, <span class="st">&#39;export2.csv&#39;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb360"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(df, <span class="st">&#39;export3.csv&#39;</span>, <span class="at">col_names =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<p>col_names 인자를 FALSE로 지정할 경우 열 이름 역시 저장되지 않습니다.</p>
</div>
</div>
<div id="엑셀-저장하기" class="section level2" number="12.2">
<h2 number="12.2"><span class="header-section-number">12.2</span> 엑셀 저장하기</h2>
<p><code>openxlsx</code> 패키지를 이용해 엑셀 파일로 저장할 수 있습니다.</p>
<div class="sourceCode" id="cb361"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(openxlsx)</span>
<span id="cb361-2"><a href="#cb361-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb361-3"><a href="#cb361-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.xlsx</span>(df, <span class="at">file =</span> <span class="st">&#39;output_example.xlsx&#39;</span>)</span></code></pre></div>
<p><code>openxlsx</code> 패키지를 이용할 경우 R 내에서 다양한 형식으로 엑셀을 꾸민 후 파일을 저장할 수 있습니다. 자세한 내용은 다음 url을 참조하시기 바랍니다.</p>
</div>
<div id="r-object-file-1" class="section level2" number="12.3">
<h2 number="12.3"><span class="header-section-number">12.3</span> R object File</h2>
<p><code>saveRDS()</code> 함수를 통해 작업중인 내용을 RDS 파일로 저장할 수 있습니다.</p>
<div class="sourceCode" id="cb362"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">saveRDS</span>(df, <span class="st">&#39;df.rds&#39;</span>)</span></code></pre></div>
<!--chapter:end:export-data.Rmd-->
</div>
</div>
<div id="part-효율적이고-가독성-높은-코드" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) 효율적이고 가독성 높은 코드</h1>
</div>
<div id="함수" class="section level1" number="13">
<h1 number="13"><span class="header-section-number">13</span> 함수</h1>
<p>반복되는 작업을 매번 복사-붙여넣기 하는 것은 매우 비효율적이며, 함수를 작성하여 사용할 경우 매우 효율적인 작업이 가능합니다.</p>
<div id="함수의-요소" class="section level2" number="13.1">
<h2 number="13.1"><span class="header-section-number">13.1</span> 함수의 요소</h2>
<p>R에서 함수는 크게 3가지 요소로 구성됩니다.</p>
<ul>
<li><code>body()</code>: 함수 내부의 코드</li>
<li><code>formals()</code>: 인자(argument) 내역</li>
<li><code>environment()</code>: 함수의 변수에 대한 위치</li>
</ul>
<p>예를 들어 금융 자산의 현재 가치는 다음과 같이 계산됩니다.</p>
<p><span class="math display">\[PV = FV / (1+r)^n\]</span></p>
<ul>
<li>PV: 현재 가치</li>
<li>FV: 미래 가치</li>
<li>r: 할인률</li>
<li>n: 기간</li>
</ul>
<p>이를 함수로 나타내면 다음과 같습니다.</p>
<div class="sourceCode" id="cb363"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a>PV <span class="ot">=</span> <span class="cf">function</span>(FV, r, n) {</span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true" tabindex="-1"></a>  PV <span class="ot">=</span> FV <span class="sc">/</span> (<span class="dv">1</span><span class="sc">+</span>r)<span class="sc">^</span>n</span>
<span id="cb363-3"><a href="#cb363-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(PV, <span class="dv">2</span>)</span>
<span id="cb363-4"><a href="#cb363-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>3가지 요소를 확인해보도록 하겠습니다.</p>
<div class="sourceCode" id="cb364"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">body</span>(PV)</span></code></pre></div>
<pre><code>## {
##     PV = FV/(1 + r)^n
##     round(PV, 2)
## }</code></pre>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="fu">formals</span>(PV)</span></code></pre></div>
<pre><code>## $FV
## 
## 
## $r
## 
## 
## $n</code></pre>
<div class="sourceCode" id="cb368"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="fu">environment</span>(PV)</span></code></pre></div>
<pre><code>## &lt;environment: R_GlobalEnv&gt;</code></pre>
</div>
<div id="인자" class="section level2" number="13.2">
<h2 number="13.2"><span class="header-section-number">13.2</span> 인자</h2>
<p><code>PV()</code> 함수는 여러 방법으로 실행할 수 있습니다.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="at">FV =</span> <span class="dv">1000</span>, <span class="at">r =</span> <span class="fl">0.08</span>, <span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 680.6</code></pre>
<p>모든 인자 리스트와 이에 대응되는 값을 입력합니다.</p>
<div class="sourceCode" id="cb372"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="dv">1000</span>, <span class="fl">0.08</span>, <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 680.6</code></pre>
<p>인자 리스트를 생략하면, 순서대로 값이 입력됩니다.</p>
<div class="sourceCode" id="cb374"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="at">r =</span> <span class="fl">0.08</span>, <span class="at">FV =</span> <span class="dv">1000</span>, <span class="at">n =</span> <span class="dv">5</span>)</span></code></pre></div>
<pre><code>## [1] 680.6</code></pre>
<p>인자 내역을 순서대로 입력하지 않아도 됩니다.</p>
<div class="sourceCode" id="cb376"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="dv">1000</span>, <span class="fl">0.08</span>)</span></code></pre></div>
<pre><code>## Error in PV(1000, 0.08): argument &quot;n&quot; is missing, with no default</code></pre>
<p><code>PV()</code> 함수에 필요한 인자는 3개인 반면, 2개만 입력하였으므로 에러가 발생합니다.</p>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a>PV <span class="ot">=</span> <span class="cf">function</span>(<span class="at">FV =</span> <span class="dv">1000</span>, <span class="at">r =</span> .<span class="dv">08</span>, <span class="at">n =</span> <span class="dv">5</span>) {</span>
<span id="cb378-2"><a href="#cb378-2" aria-hidden="true" tabindex="-1"></a>  PV <span class="ot">=</span> FV <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> r)<span class="sc">^</span>n</span>
<span id="cb378-3"><a href="#cb378-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(PV, <span class="dv">2</span>)</span>
<span id="cb378-4"><a href="#cb378-4" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb378-5"><a href="#cb378-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb378-6"><a href="#cb378-6" aria-hidden="true" tabindex="-1"></a><span class="fu">PV</span>(<span class="dv">1000</span>, <span class="fl">0.08</span>)</span></code></pre></div>
<pre><code>## [1] 680.6</code></pre>
<p>만일 함수의 인자에 디폴트 값이 입력되어 있다면, 함수 실행시 이를 생략하여도 디폴트 값이 입력됩니다. 위 예제에서 n값이 디폴트 값인 5가 적용되었습니다.</p>
</div>
<div id="다중-결과값-출력" class="section level2" number="13.3">
<h2 number="13.3"><span class="header-section-number">13.3</span> 다중 결과값 출력</h2>
<p>동일한 함수를 여러값에 적용하기 위해서는 함수 내부에 <code>c()</code> 함수를 적용해야 합니다.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a>bad <span class="ot">=</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb380-2"><a href="#cb380-2" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> y       <span class="co"># 1</span></span>
<span id="cb380-3"><a href="#cb380-3" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> y       <span class="co"># 2</span></span>
<span id="cb380-4"><a href="#cb380-4" aria-hidden="true" tabindex="-1"></a>  <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> y   <span class="co"># 3  </span></span>
<span id="cb380-5"><a href="#cb380-5" aria-hidden="true" tabindex="-1"></a>  x <span class="sc">/</span> y           <span class="co"># 4</span></span>
<span id="cb380-6"><a href="#cb380-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb380-7"><a href="#cb380-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb380-8"><a href="#cb380-8" aria-hidden="true" tabindex="-1"></a><span class="fu">bad</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.5</code></pre>
<p>1, 2, 3, 4번 모든 연산에 대한 출력을 원하지만, 맨 마지막 연산값 만이 출력됩니다.</p>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a>good <span class="ot">=</span> <span class="cf">function</span>(x, y) {</span>
<span id="cb382-2"><a href="#cb382-2" aria-hidden="true" tabindex="-1"></a>  output1 <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> y</span>
<span id="cb382-3"><a href="#cb382-3" aria-hidden="true" tabindex="-1"></a>  output2 <span class="ot">=</span> x <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> y</span>
<span id="cb382-4"><a href="#cb382-4" aria-hidden="true" tabindex="-1"></a>  output3 <span class="ot">=</span> <span class="dv">2</span> <span class="sc">*</span> x <span class="sc">+</span> <span class="dv">2</span> <span class="sc">*</span> y</span>
<span id="cb382-5"><a href="#cb382-5" aria-hidden="true" tabindex="-1"></a>  output4 <span class="ot">=</span> x <span class="sc">/</span> y</span>
<span id="cb382-6"><a href="#cb382-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(output1, output2, output3, output4)</span>
<span id="cb382-7"><a href="#cb382-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb382-8"><a href="#cb382-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb382-9"><a href="#cb382-9" aria-hidden="true" tabindex="-1"></a><span class="fu">good</span>(<span class="dv">1</span>, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 4.0 5.0 6.0 0.5</code></pre>
<p>모든 결과를 output*에 저장한 후 <code>c()</code> 함수를 통해 이를 묶어주면, 모든 연산값이 출력됩니다.</p>
<!--chapter:end:function.Rmd-->
</div>
</div>
<div id="loop-statement" class="section level1" number="14">
<h1 number="14"><span class="header-section-number">14</span> Loop Statement</h1>
<p>루프 구문을 사용할 경우 반복된 작업을 간단히 수행할 수 있습니다.</p>
<div id="기본-제어-구문-if-for-while-등" class="section level2" number="14.1">
<h2 number="14.1"><span class="header-section-number">14.1</span> 기본 제어 구문 (<code>if</code>, <code>for</code>, <code>while</code> 등)</h2>
<div id="if-구문" class="section level3" number="14.1.1">
<h3 number="14.1.1"><span class="header-section-number">14.1.1</span> <code>if</code> 구문</h3>
<p>if 구문은 다음과 같이 구성됩니다.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (test_expression) {</span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a>  statement</span>
<span id="cb384-3"><a href="#cb384-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>괄호 안의 test_expression이 TRUE일 경우에만 statement 코드가 실행됩니다.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">8</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb385-3"><a href="#cb385-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>)) {</span>
<span id="cb385-4"><a href="#cb385-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="st">&#39;x contains negative number&#39;</span>)</span>
<span id="cb385-5"><a href="#cb385-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;x contains negative number&quot;</code></pre>
<p>만일 x중 음수가 존재하면 <em>x contains negative number</em>가 출력되는 조건이며, -2가 음수이므로 조건을 만족합니다.</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span> (<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb387-2"><a href="#cb387-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb387-3"><a href="#cb387-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">any</span> (y <span class="sc">&lt;</span> <span class="dv">0</span>)) {</span>
<span id="cb387-4"><a href="#cb387-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;y contains negative numbers&quot;</span>)</span>
<span id="cb387-5"><a href="#cb387-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>y에는 음수가 존재하지 않으므로, 구문이 실행되지 않습니다.</p>
</div>
<div id="if...else-구문" class="section level3" number="14.1.2">
<h3 number="14.1.2"><span class="header-section-number">14.1.2</span> <code>if...else</code> 구문</h3>
<p>if 구문만 존재할 시 이를 만족하지 않는 경우 아무런 구문도 실행되지 않습니다. if else 구문의 경우 조건을 만족하지 않을 경우 else에 해당하는 구문이 실행됩니다.</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (test_expression) {</span>
<span id="cb388-2"><a href="#cb388-2" aria-hidden="true" tabindex="-1"></a>  statement <span class="dv">1</span></span>
<span id="cb388-3"><a href="#cb388-3" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb388-4"><a href="#cb388-4" aria-hidden="true" tabindex="-1"></a>  statement <span class="dv">2</span></span>
<span id="cb388-5"><a href="#cb388-5" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>만일 test_expression 구문이 TRUE이면 statement 1이 실행되며, 그렇지 않을 경우 statement 2가 실행됩니다.</p>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb389-1"><a href="#cb389-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">=</span> <span class="fu">c</span> (<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb389-2"><a href="#cb389-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb389-3"><a href="#cb389-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">any</span> (y <span class="sc">&lt;</span> <span class="dv">0</span>)) {</span>
<span id="cb389-4"><a href="#cb389-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;y contains negative numbers&quot;</span>)</span>
<span id="cb389-5"><a href="#cb389-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb389-6"><a href="#cb389-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;y contains all positive numbers&quot;</span>)</span>
<span id="cb389-7"><a href="#cb389-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;y contains all positive numbers&quot;</code></pre>
<p>y에 음수가 존재하는 if구문이 FALSE 이므로, else에 해당하는 메세지가 출력됩니다.</p>
<p>if…else 구문은 <code>ifelse()</code> 함수로 간단히 나타낼 수도 있습니다.</p>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb391-1"><a href="#cb391-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span> (<span class="dv">8</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">5</span>)</span>
<span id="cb391-2"><a href="#cb391-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb391-3"><a href="#cb391-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(<span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">0</span>), <span class="st">&quot;x contains negative numbers&quot;</span>, <span class="st">&quot;x contains all positive numbers&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;x contains all positive numbers&quot;</code></pre>
<p>또한 if와 else 사이에 else if 조건을 통해, 여러 조건을 추가할 수도 있습니다.</p>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="#cb393-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">7</span></span>
<span id="cb393-2"><a href="#cb393-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb393-3"><a href="#cb393-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;=</span> <span class="dv">10</span>) {</span>
<span id="cb393-4"><a href="#cb393-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;x exceeds acceptable tolerance levels&quot;</span>)</span>
<span id="cb393-5"><a href="#cb393-5" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> <span class="cf">if</span>(x <span class="sc">&gt;=</span> <span class="dv">0</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">10</span>) {</span>
<span id="cb393-6"><a href="#cb393-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;x is within acceptable tolerance levels&quot;</span>)</span>
<span id="cb393-7"><a href="#cb393-7" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb393-8"><a href="#cb393-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span> (<span class="st">&quot;x is negative&quot;</span>)</span>
<span id="cb393-9"><a href="#cb393-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;x is within acceptable tolerance levels&quot;</code></pre>
<p>위 조건은 다음과 같습니다.</p>
<ol style="list-style-type: decimal">
<li>x가 10 이상일 경우 <strong>x exceeds acceptable tolerance levels</strong>을 출력합니다.</li>
<li>만일 x가 10 이상, 10 미만일경우 <strong>x is within acceptable tolerance levels</strong>을 출력합니다.</li>
<li>그렇지 않을 경우 <strong>x is negative</strong>을 출력합니다.</li>
</ol>
<p>x는 7 이므로 else에 해당하는 내용이 출력됩니다.</p>
</div>
<div id="for-loop" class="section level3" number="14.1.3">
<h3 number="14.1.3"><span class="header-section-number">14.1.3</span> <code>for loop</code></h3>
<p>for loop 구문은 특정한 부분의 코드가 반복적으로 수행될 수 있도록 합니다.</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="#cb395-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>) {</span>
<span id="cb395-2"><a href="#cb395-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">&lt;</span>code<span class="sc">:</span> do stuff here with i<span class="sc">&gt;</span></span>
<span id="cb395-3"><a href="#cb395-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>먼저 i에 1이 들어간 뒤 code에 해당하는 부분이 실행됩니다. 그 후, i에 2가 들어간 뒤 다시 code가 실행되며 이 작업이 100까지 반복됩니다. 실제 예제를 살펴보도록 하겠습니다.</p>
<div class="sourceCode" id="cb396"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">2010</span><span class="sc">:</span><span class="dv">2016</span>) {</span>
<span id="cb396-2"><a href="#cb396-2" aria-hidden="true" tabindex="-1"></a>  output <span class="ot">=</span> <span class="fu">paste</span>(<span class="st">&quot;The year is&quot;</span>, i)</span>
<span id="cb396-3"><a href="#cb396-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(output)</span>
<span id="cb396-4"><a href="#cb396-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] &quot;The year is 2010&quot;
## [1] &quot;The year is 2011&quot;
## [1] &quot;The year is 2012&quot;
## [1] &quot;The year is 2013&quot;
## [1] &quot;The year is 2014&quot;
## [1] &quot;The year is 2015&quot;
## [1] &quot;The year is 2016&quot;</code></pre>
<p>i에 2010부터 2016 까지 대입되어 코드가 실행됩니다.</p>
</div>
<div id="while-loop" class="section level3" number="14.1.4">
<h3 number="14.1.4"><span class="header-section-number">14.1.4</span> <code>while loop</code></h3>
<p>while 구문은 for 구문과 비슷하며, 조건이 충족되는한 루프가 계속해서 실행됩니다.</p>
<div class="sourceCode" id="cb398"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb398-1"><a href="#cb398-1" aria-hidden="true" tabindex="-1"></a>counter <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb398-2"><a href="#cb398-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb398-3"><a href="#cb398-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (test_expression) {</span>
<span id="cb398-4"><a href="#cb398-4" aria-hidden="true" tabindex="-1"></a>  statement</span>
<span id="cb398-5"><a href="#cb398-5" aria-hidden="true" tabindex="-1"></a>  counter <span class="ot">=</span> counter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb398-6"><a href="#cb398-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>test_expression이 TRUE이면 statement 코드가 실행되며, counter를 1씩 더합니다. 즉, test_expression이 FALSE가 될때까지 loop가 반복됩니다.</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a>counter <span class="ot">=</span> <span class="dv">1</span></span>
<span id="cb399-2"><a href="#cb399-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb399-3"><a href="#cb399-3" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (counter <span class="sc">&lt;=</span> <span class="dv">5</span>) {</span>
<span id="cb399-4"><a href="#cb399-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(counter)</span>
<span id="cb399-5"><a href="#cb399-5" aria-hidden="true" tabindex="-1"></a>  counter <span class="ot">=</span> counter <span class="sc">+</span> <span class="dv">1</span></span>
<span id="cb399-6"><a href="#cb399-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5</code></pre>
<p>counter가 5 이하일 경우 이를 출력하며, 6일 경우 test_expression이 FALSE가 되어 loop가 멈추게 됩니다.</p>
</div>
<div id="next" class="section level3" number="14.1.5">
<h3 number="14.1.5"><span class="header-section-number">14.1.5</span> <code>next</code></h3>
<p>next 명령어는 loop 구문에서 특정 단계를 실행하지 않고 넘어가기 위해 사용됩니다.</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span>
<span id="cb401-2"><a href="#cb401-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb401-3"><a href="#cb401-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> x) {</span>
<span id="cb401-4"><a href="#cb401-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (i <span class="sc">==</span> <span class="dv">3</span>) {</span>
<span id="cb401-5"><a href="#cb401-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">next</span></span>
<span id="cb401-6"><a href="#cb401-6" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb401-7"><a href="#cb401-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb401-8"><a href="#cb401-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 4
## [1] 5</code></pre>
<p>일반적인 for loop 구문으로써 i를 출력하며, if 구문을 통해 i가 3일 경우 명령을 실행하지 않고 다음 for 구문(i = 4)으로 건너뜁니다.</p>
</div>
</div>
<div id="apply-계열-함수" class="section level2" number="14.2">
<h2 number="14.2"><span class="header-section-number">14.2</span> Apply 계열 함수</h2>
<p>apply 계열 함수는 loop 구문과 비슷한 역할을 하며, 훨씬 간결하게 표현할 수 있습니다.</p>
<div id="apply" class="section level3" number="14.2.1">
<h3 number="14.2.1"><span class="header-section-number">14.2.1</span> <code>apply()</code></h3>
<p><code>apply()</code> 함수는 매트릭스나 데이터프레임의 행 혹은 열단위 계산에 자주 사용됩니다. 해당 함수는 다음과 같이 구성됩니다.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(x, MARGIN, FUN, ...)</span></code></pre></div>
<ul>
<li>x: 매트릭스, 데이터프레임, 혹은 어레이</li>
<li>MARGIN: 함수가 적용될 벡. 1은 행을, 2는 열을, c(1, 2)는 행과 열을 의미</li>
<li>FUN: 적용될 함수</li>
<li>…: 기타</li>
</ul>
<div class="sourceCode" id="cb404"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars)</span></code></pre></div>
<pre><code>##                    mpg cyl disp  hp drat    wt  qsec vs am gear carb
## Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
## Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
## Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
## Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
## Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
## Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
<div class="sourceCode" id="cb406"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb406-1"><a href="#cb406-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(mtcars, <span class="dv">2</span>, mean)</span></code></pre></div>
<pre><code>##      mpg      cyl     disp       hp     drat       wt     qsec       vs       am     gear     carb 
##  20.0906   6.1875 230.7219 146.6875   3.5966   3.2172  17.8487   0.4375   0.4062   3.6875   2.8125</code></pre>
<p>mtcars 데이터에서 2, 즉 열의 방향으로 평균(mean)을 구합니다.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(mtcars, <span class="dv">1</span>, sum)</span></code></pre></div>
<pre><code>##           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive   Hornet Sportabout 
##               329.0               329.8               259.6               426.1               590.3 
##             Valiant          Duster 360           Merc 240D            Merc 230            Merc 280 
##               385.5               656.9               271.0               299.6               350.5 
##           Merc 280C          Merc 450SE          Merc 450SL         Merc 450SLC  Cadillac Fleetwood 
##               349.7               510.7               511.5               509.9               728.6 
## Lincoln Continental   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
##               726.6               725.7               213.8               195.2               207.0 
##       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28    Pontiac Firebird 
##               273.8               519.6               506.1               646.3               631.2 
##           Fiat X1-9       Porsche 914-2        Lotus Europa      Ford Pantera L        Ferrari Dino 
##               208.2               272.6               273.7               670.7               379.6 
##       Maserati Bora          Volvo 142E 
##               694.7               288.9</code></pre>
<p>이번에는 1 즉 행의 방향으로 합계(sum)를 구합니다.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="#cb410-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(mtcars, <span class="dv">2</span>, quantile, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.10</span>, <span class="fl">0.25</span>, <span class="fl">0.05</span>, <span class="fl">0.75</span>, <span class="fl">0.90</span>))</span></code></pre></div>
<pre><code>##       mpg cyl   disp     hp  drat    wt  qsec vs am gear carb
## 10% 14.34   4  80.61  66.00 3.007 1.956 15.53  0  0    3    1
## 25% 15.43   4 120.83  96.50 3.080 2.581 16.89  0  0    3    2
## 5%  12.00   4  77.35  63.65 2.853 1.736 15.05  0  0    3    1
## 75% 22.80   8 326.00 180.00 3.920 3.610 18.90  1  1    4    4
## 90% 30.09   8 396.00 243.50 4.209 4.048 19.99  1  1    5    4</code></pre>
<p>각 열의 분위수(quantile)를 구하게 되며, 분위는 probs 인자를 통해 직접 입력할 수 있습니다.</p>
</div>
<div id="lapply" class="section level3" number="14.2.2">
<h3 number="14.2.2"><span class="header-section-number">14.2.2</span> <code>lapply()</code></h3>
<p><code>lapply()</code> 함수는 리스트에 적용되며, 결과 또한 리스트로 반환됩니다. 해당 함수는 다음과 같이 구성됩니다.</p>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(x, FUN, ...)</span></code></pre></div>
<ul>
<li>x: 리스트</li>
<li>FUN: 적용될 함수</li>
<li>…: 기타</li>
</ul>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb413-1"><a href="#cb413-1" aria-hidden="true" tabindex="-1"></a>data <span class="ot">=</span> <span class="fu">list</span>(<span class="at">item1 =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>,</span>
<span id="cb413-2"><a href="#cb413-2" aria-hidden="true" tabindex="-1"></a>            <span class="at">item2 =</span> <span class="fu">rnorm</span>(<span class="dv">10</span>),</span>
<span id="cb413-3"><a href="#cb413-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">item3 =</span> <span class="fu">rnorm</span>(<span class="dv">20</span>, <span class="dv">1</span>),</span>
<span id="cb413-4"><a href="#cb413-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">item4 =</span> <span class="fu">rnorm</span>(<span class="dv">100</span>, <span class="dv">5</span>))</span>
<span id="cb413-5"><a href="#cb413-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb413-6"><a href="#cb413-6" aria-hidden="true" tabindex="-1"></a>data</span></code></pre></div>
<pre><code>## $item1
## [1] 1 2 3 4
## 
## $item2
##  [1] -0.56048 -0.23018  1.55871  0.07051  0.12929  1.71506  0.46092 -1.26506 -0.68685 -0.44566
## 
## $item3
##  [1]  2.22408  1.35981  1.40077  1.11068  0.44416  2.78691  1.49785 -0.96662  1.70136  0.52721 -0.06782  0.78203
## [13] -0.02600  0.27111  0.37496 -0.68669  1.83779  1.15337 -0.13814  2.25381
## 
## $item4
##   [1] 5.426 4.705 5.895 5.878 5.822 5.689 5.554 4.938 4.694 4.620 4.305 4.792 3.735 7.169 6.208 3.877 4.597 4.533
##  [19] 5.780 4.917 5.253 4.971 4.957 6.369 4.774 6.516 3.451 5.585 5.124 5.216 5.380 4.498 4.667 3.981 3.928 5.304
##  [37] 5.448 5.053 5.922 7.050 4.509 2.691 6.006 4.291 4.312 6.026 4.715 3.779 5.181 4.861 5.006 5.385 4.629 5.644
##  [55] 4.780 5.332 6.097 5.435 4.674 6.149 5.994 5.548 5.239 4.372 6.361 4.400 7.187 6.533 4.764 3.974 4.290 5.257
##  [73] 4.753 4.652 4.048 4.955 4.215 3.332 4.620 5.919 4.425 5.608 3.382 4.944 5.519 5.301 5.106 4.359 4.150 3.976
##  [91] 5.118 4.053 4.509 4.744 6.844 4.348 5.235 5.078 4.038 4.929</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="#cb415-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(data, mean)</span></code></pre></div>
<pre><code>## $item1
## [1] 2.5
## 
## $item2
## [1] 0.07463
## 
## $item3
## [1] 0.892
## 
## $item4
## [1] 5.022</code></pre>
<p><code>lapply()</code> 함수를 통해 각 항목의 평균을 구하며, 결과 또한 리스트 형태입니다.</p>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="#cb417-1" aria-hidden="true" tabindex="-1"></a>beaver_data <span class="ot">=</span> <span class="fu">list</span>(<span class="at">beaver1 =</span> beaver1, <span class="at">beaver2 =</span> beaver2)</span>
<span id="cb417-2"><a href="#cb417-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb417-3"><a href="#cb417-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(beaver_data, head)</span></code></pre></div>
<pre><code>## $beaver1
##   day time  temp activ
## 1 346  840 36.33     0
## 2 346  850 36.34     0
## 3 346  900 36.35     0
## 4 346  910 36.42     0
## 5 346  920 36.55     0
## 6 346  930 36.69     0
## 
## $beaver2
##   day time  temp activ
## 1 307  930 36.58     0
## 2 307  940 36.73     0
## 3 307  950 36.93     0
## 4 307 1000 37.15     0
## 5 307 1010 37.23     0
## 6 307 1020 37.24     0</code></pre>
<p>위 데이터의 각 항목에서 열 별 평균을 구하고자 할 경우 <code>lapply()</code> 함수 만으로는 계산이 불가능합니다. 이러한 경우 해당 함수 내부에 직접 <code>function()</code>을 정의하여 복잡한 계산을 수행할 수 있습니다.</p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(beaver_data, <span class="cf">function</span>(x) {</span>
<span id="cb419-2"><a href="#cb419-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">apply</span>(x, <span class="dv">2</span>, mean), <span class="dv">2</span>)</span>
<span id="cb419-3"><a href="#cb419-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>## $beaver1
##     day    time    temp   activ 
##  346.20 1312.02   36.86    0.05 
## 
## $beaver2
##     day    time    temp   activ 
##  307.13 1446.20   37.60    0.62</code></pre>
<p><code>function(x)</code>를 통해 각 항목에 적용될 함수를 직접 정의할 수 있으며, 열의 방향으로 평균을 구한 뒤 소수 둘째 자리까지 반올림을 하게 됩니다.</p>
</div>
<div id="sapply" class="section level3" number="14.2.3">
<h3 number="14.2.3"><span class="header-section-number">14.2.3</span> <code>sapply()</code></h3>
<p><code>sapply()</code> 함수는 <code>lapply()</code> 함수와 거의 동일하며, 결과가 리스트가 아닌 벡터 혹은 매트릭스로 출력된다는 점만 차이가 있습니다.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="#cb421-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(beaver_data, <span class="cf">function</span>(x) {</span>
<span id="cb421-2"><a href="#cb421-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">apply</span>(x, <span class="dv">2</span>, mean), <span class="dv">2</span>)</span>
<span id="cb421-3"><a href="#cb421-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>## $beaver1
##     day    time    temp   activ 
##  346.20 1312.02   36.86    0.05 
## 
## $beaver2
##     day    time    temp   activ 
##  307.13 1446.20   37.60    0.62</code></pre>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb423-1"><a href="#cb423-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sapply</span>(beaver_data, <span class="cf">function</span>(x) {</span>
<span id="cb423-2"><a href="#cb423-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">apply</span>(x, <span class="dv">2</span>, mean), <span class="dv">2</span>)</span>
<span id="cb423-3"><a href="#cb423-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<pre><code>##       beaver1 beaver2
## day    346.20  307.13
## time  1312.02 1446.20
## temp    36.86   37.60
## activ    0.05    0.62</code></pre>
</div>
</div>
<div id="기타-함수" class="section level2" number="14.3">
<h2 number="14.3"><span class="header-section-number">14.3</span> 기타 함수</h2>
<p>열과 행이 합계나 평균을 구할 때는 <code>apply()</code> 함수보다 간단하게 표현할 수 있는 함수들이 있습니다.</p>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb425-1"><a href="#cb425-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowSums</span>(mtcars)</span></code></pre></div>
<pre><code>##           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive   Hornet Sportabout 
##               329.0               329.8               259.6               426.1               590.3 
##             Valiant          Duster 360           Merc 240D            Merc 230            Merc 280 
##               385.5               656.9               271.0               299.6               350.5 
##           Merc 280C          Merc 450SE          Merc 450SL         Merc 450SLC  Cadillac Fleetwood 
##               349.7               510.7               511.5               509.9               728.6 
## Lincoln Continental   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
##               726.6               725.7               213.8               195.2               207.0 
##       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28    Pontiac Firebird 
##               273.8               519.6               506.1               646.3               631.2 
##           Fiat X1-9       Porsche 914-2        Lotus Europa      Ford Pantera L        Ferrari Dino 
##               208.2               272.6               273.7               670.7               379.6 
##       Maserati Bora          Volvo 142E 
##               694.7               288.9</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb427-1"><a href="#cb427-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colSums</span>(mtcars)</span></code></pre></div>
<pre><code>##    mpg    cyl   disp     hp   drat     wt   qsec     vs     am   gear   carb 
##  642.9  198.0 7383.1 4694.0  115.1  103.0  571.2   14.0   13.0  118.0   90.0</code></pre>
<p><code>rowSums()</code> 함수는 행의 합계를, <code>colSums()</code> 함수는 열의 합계는 구하며 이는 <code>apply(mtcars, 1 or 2, sum)</code> 과 동일합니다.</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rowMeans</span>(mtcars)</span></code></pre></div>
<pre><code>##           Mazda RX4       Mazda RX4 Wag          Datsun 710      Hornet 4 Drive   Hornet Sportabout 
##               29.91               29.98               23.60               38.74               53.66 
##             Valiant          Duster 360           Merc 240D            Merc 230            Merc 280 
##               35.05               59.72               24.63               27.23               31.86 
##           Merc 280C          Merc 450SE          Merc 450SL         Merc 450SLC  Cadillac Fleetwood 
##               31.79               46.43               46.50               46.35               66.23 
## Lincoln Continental   Chrysler Imperial            Fiat 128         Honda Civic      Toyota Corolla 
##               66.06               65.97               19.44               17.74               18.81 
##       Toyota Corona    Dodge Challenger         AMC Javelin          Camaro Z28    Pontiac Firebird 
##               24.89               47.24               46.01               58.75               57.38 
##           Fiat X1-9       Porsche 914-2        Lotus Europa      Ford Pantera L        Ferrari Dino 
##               18.93               24.78               24.88               60.97               34.51 
##       Maserati Bora          Volvo 142E 
##               63.16               26.26</code></pre>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="#cb431-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colMeans</span>(mtcars)</span></code></pre></div>
<pre><code>##      mpg      cyl     disp       hp     drat       wt     qsec       vs       am     gear     carb 
##  20.0906   6.1875 230.7219 146.6875   3.5966   3.2172  17.8487   0.4375   0.4062   3.6875   2.8125</code></pre>
<p><code>rowMeans()</code>와 <code>colMeans()</code> 함수 역시 각각 행과 열의 평균을 구합니다.</p>
<!--chapter:end:loop.Rmd-->
</div>
</div>
<div id="pipe-operator" class="section level1" number="15">
<h1 number="15"><span class="header-section-number">15</span> Pipe Operator (<code>%&gt;%</code>)</h1>
<p><code>magrittr</code> 패키지는 코드의 가독성을 높이는 다양한 오퍼레이터를 제공합니다.</p>
<div id="pipe-operator-1" class="section level2" number="15.1">
<h2 number="15.1"><span class="header-section-number">15.1</span> Pipe Operator (<code>%&gt;%</code>)</h2>
<p>파이프 오퍼레이터는 R에서 동일한 데이터를 대상으로 연속으로 작업하게 해주는 오퍼레이터(연산자)입니다. 크롤링에 필수적인 rvest 패키지를 설치하면 자동으로 magrittr 패키지가 설치되어 파이프 오퍼레이터를 사용할 수 있습니다.</p>
<p>흔히 프로그래밍에서 x라는 데이터를 F()라는 함수에 넣어 결괏값을 확인하고 싶으면 F(x)의 방법을 사용합니다. 예를 들어 3과 5라는 데이터 중 큰 값을 찾으려면 <code>max(3,5)</code>를 통해 확인합니다. 이를 통해 나온 결괏값을 또 다시 G()라는 함수에 넣어 결괏값을 확인하려면 비슷한 과정을 거칩니다. <code>max(3,5)</code>를 통해 나온 값의 제곱근을 구하려면 <code>result = max(3,5)</code>를 통해 첫 번째 결괏값을 저장하고, <code>sqrt(result)</code>를 통해 두 번째 결괏값을 계산합니다. 물론 <code>sqrt(max(3,5))</code>와 같은 표현법으로 한 번에 표현할 수 있습니다.</p>
<p>이러한 표현의 단점은 계산하는 함수가 많아질수록 저장하는 변수가 늘어나거나 괄호가 지나치게 길어진다는 것입니다. 그러나 파이프 오퍼레이터인 %&gt;%를 사용하면 함수 간의 관계를 매우 직관적으로 표현하고 이해할 수 있습니다. 이를 정리하면 아래 표와 같습니다.</p>
<table class="table" style="margin-left: auto; margin-right: auto;">
<caption>
(#tab:mag)파이프 오퍼레이터의 표현과 내용 비교
</caption>
<thead>
<tr>
<th style="text-align:center;">
내용
</th>
<th style="text-align:center;">
표현.방법
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">
F(x)
</td>
<td style="text-align:center;">
x %&gt;% F
</td>
</tr>
<tr>
<td style="text-align:center;">
G(F(x))
</td>
<td style="text-align:center;">
x %&gt;% F %&gt;% G
</td>
</tr>
</tbody>
</table>
<p>간단한 예제를 통해 파이프 오퍼레이터의 사용법을 살펴보겠습니다. 먼저 다음과 같은 10개의 숫자가 있다고 가정합니다.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="#cb433-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">0.3078</span>, <span class="fl">0.2577</span>, <span class="fl">0.5523</span>, <span class="fl">0.0564</span>, <span class="fl">0.4685</span>,</span>
<span id="cb433-2"><a href="#cb433-2" aria-hidden="true" tabindex="-1"></a>      <span class="fl">0.4838</span>, <span class="fl">0.8124</span>, <span class="fl">0.3703</span>, <span class="fl">0.5466</span>, <span class="fl">0.1703</span>)</span></code></pre></div>
<p>우리가 원하는 과정은 다음과 같습니다.</p>
<ol style="list-style-type: decimal">
<li>각 값들의 로그값을 구할 것</li>
<li>로그값들의 계차를 구할 것</li>
<li>구해진 계차의 지수값을 구할 것</li>
<li>소수 둘째 자리까지 반올림할 것</li>
</ol>
<p>입니다. 즉 <code>log()</code>, <code>diff()</code>, <code>exp()</code>, <code>round()</code>에 대한 값을 순차적으로 구하고자 합니다.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="#cb434-1" aria-hidden="true" tabindex="-1"></a>x1 <span class="ot">=</span> <span class="fu">log</span>(x)</span>
<span id="cb434-2"><a href="#cb434-2" aria-hidden="true" tabindex="-1"></a>x2 <span class="ot">=</span> <span class="fu">diff</span>(x1)</span>
<span id="cb434-3"><a href="#cb434-3" aria-hidden="true" tabindex="-1"></a>x3 <span class="ot">=</span> <span class="fu">exp</span>(x2)</span>
<span id="cb434-4"><a href="#cb434-4" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(x3, <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.84 2.14 0.10 8.31 1.03 1.68 0.46 1.48 0.31</code></pre>
<p>첫 번째 방법은 단계별 함수의 결괏값을 변수에 저장하고 저장된 변수를 다시 불러와 함수에 넣고 계산하는 방법입니다. 전반적인 계산 과정을 확인하기에는 좋지만 매번 변수에 저장하고 불러오는 과정이 매우 비효율적이며 코드도 불필요하게 길어집니다.</p>
<div class="sourceCode" id="cb436"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb436-1"><a href="#cb436-1" aria-hidden="true" tabindex="-1"></a><span class="fu">round</span>(<span class="fu">exp</span>(<span class="fu">diff</span>(<span class="fu">log</span>(x))), <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.84 2.14 0.10 8.31 1.03 1.68 0.46 1.48 0.31</code></pre>
<p>두 번째는 괄호를 통해 감싸는 방법입니다. 앞선 방법에 비해 코드는 짧아졌지만, 계산 과정을 알아보기에는 매우 불편한 방법으로 코드가 짜여 있습니다.</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="#cb438-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb438-2"><a href="#cb438-2" aria-hidden="true" tabindex="-1"></a>x <span class="sc">%&gt;%</span> <span class="fu">log</span>() <span class="sc">%&gt;%</span> <span class="fu">diff</span>() <span class="sc">%&gt;%</span> <span class="fu">exp</span>() <span class="sc">%&gt;%</span> <span class="fu">round</span>(., <span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 0.84 2.14 0.10 8.31 1.03 1.68 0.46 1.48 0.31</code></pre>
<p>마지막으로 파이프 오퍼레이터를 사용하는 방법입니다. 코드도 짧으며 계산 과정을 한눈에 파악하기도 좋습니다. 맨 왼쪽에는 원하는 변수를 입력하며, %&gt;% 뒤에는 차례대로 계산하고자 하는 함수를 입력합니다. 변수의 입력값을 ()로 비워둘 경우, 오퍼레이터의 왼쪽에 있는 값이 입력 변수가 됩니다. 반면 <code>round()</code>와 같이 입력값이 두 개 이상 필요하면 마침표(.)가 오퍼레이터의 왼쪽 값으로 입력됩니다.</p>
<p>파이프 오퍼레이터는 크롤링뿐만 아니라 모든 코드에 사용할 수 있습니다. 이를 통해 훨씬 깔끔하면서도 데이터 처리 과정을 직관적으로 이해할 수 있습니다.</p>
<!--chapter:end:pipe.Rmd-->
</div>
</div>
<div id="part-데이터-구조-변형하기" class="section level1 unnumbered">
<h1 class="unnumbered">(PART) 데이터 구조 변형하기</h1>
</div>
<div id="tidyr을-이용한-데이터-모양-바꾸기" class="section level1" number="16">
<h1 number="16"><span class="header-section-number">16</span> <code>tidyr</code>을 이용한 데이터 모양 바꾸기</h1>
<p>깔끔한 데이터(tidy data)는 다음과 같이 구성되 있습니다.</p>
<ol style="list-style-type: decimal">
<li>각 변수(variable)는 열로 구성됩니다.</li>
<li>각 관측값(observation)은 행으로 구성됩니다.</li>
<li>각 타입의 관측치는 테이블을 구성합니다.</li>
</ol>
<div class="figure" style="text-align: center">
<img src="images/tidy_data.png" alt="tidy 데이터 요건" width="70%" />
<p class="caption">
(#fig:unnamed-chunk-204)tidy 데이터 요건
</p>
</div>
<p><code>tidyr</code> 패키지는 이러한 깔끔한 데이터를 만드는데 필요한 여러 함수가 있습니다.</p>
<div id="세로로-긴-데이터-만들기" class="section level2" number="16.1">
<h2 number="16.1"><span class="header-section-number">16.1</span> 세로로 긴 데이터 만들기</h2>
<p>먼저 가로로 긴(Wide) 데이터를 세로로 길게 만드는데는 <code>gather()</code> 함수가 사용됩니다. 이 함수는 여러 열을 key-value 페어로 변형해줍니다.</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb440-2"><a href="#cb440-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb440-3"><a href="#cb440-3" aria-hidden="true" tabindex="-1"></a>table4a</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   country     `1999` `2000`
## * &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766</code></pre>
<p>세 국가의 1999, 2000년 데이터가 있습니다. 이 중 country를 제외한 연도별 데이터를 세로로 길게 만들도록 하겠습니다.</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="#cb442-1" aria-hidden="true" tabindex="-1"></a>long <span class="ot">=</span> table4a <span class="sc">%&gt;%</span> <span class="fu">gather</span>(<span class="at">key =</span> years, <span class="at">value =</span> cases, <span class="sc">-</span>country)</span>
<span id="cb442-2"><a href="#cb442-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb442-3"><a href="#cb442-3" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(long)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country     years  cases
##   &lt;chr&gt;       &lt;chr&gt;  &lt;int&gt;
## 1 Afghanistan 1999     745
## 2 Brazil      1999   37737
## 3 China       1999  212258
## 4 Afghanistan 2000    2666
## 5 Brazil      2000   80488
## 6 China       2000  213766</code></pre>
<p>열 이름에 해당하던 데이터가 year 열에 들어왔으며, 관측치에 해당하는 값이 cases 열에 왔습니다.</p>
<table class="kable_wrapper table table-striped" style="margin-left: auto; margin-right: auto;">
<tbody>
<tr>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
1999
</th>
<th style="text-align:right;">
2000
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:right;">
745
</td>
<td style="text-align:right;">
2666
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
37737
</td>
<td style="text-align:right;">
80488
</td>
</tr>
<tr>
<td style="text-align:left;">
China
</td>
<td style="text-align:right;">
212258
</td>
<td style="text-align:right;">
213766
</td>
</tr>
</tbody>
</table>
</td>
<td>
<table>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
years
</th>
<th style="text-align:right;">
cases
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
745
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
37737
</td>
</tr>
<tr>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
1999
</td>
<td style="text-align:right;">
212258
</td>
</tr>
<tr>
<td style="text-align:left;">
Afghanistan
</td>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
2666
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
80488
</td>
</tr>
<tr>
<td style="text-align:left;">
China
</td>
<td style="text-align:left;">
2000
</td>
<td style="text-align:right;">
213766
</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</div>
<div id="가로로-긴-데이터-만들기" class="section level2" number="16.2">
<h2 number="16.2"><span class="header-section-number">16.2</span> 가로로 긴 데이터 만들기</h2>
<p><code>gather()</code> 함수와 반대로, <code>spread()</code> 함수를 이요할 경우 세로로 긴 데이터를 가로로 길게 만들 수 있습니다. 위의 데이터에 year 열에 있는 항목들을 열 이름으로, cases 열에 있는 항목들을 가로로 길게 되돌려야 합니다.</p>
<div class="sourceCode" id="cb444"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb444-1"><a href="#cb444-1" aria-hidden="true" tabindex="-1"></a>back2wide <span class="ot">=</span> long <span class="sc">%&gt;%</span> <span class="fu">spread</span>(years, cases)</span>
<span id="cb444-2"><a href="#cb444-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb444-3"><a href="#cb444-3" aria-hidden="true" tabindex="-1"></a>back2wide</span></code></pre></div>
<pre><code>## # A tibble: 3 x 3
##   country     `1999` `2000`
##   &lt;chr&gt;        &lt;int&gt;  &lt;int&gt;
## 1 Afghanistan    745   2666
## 2 Brazil       37737  80488
## 3 China       212258 213766</code></pre>
<p>원래와 동일한 데이터로 되돌아 왔습니다.</p>
</div>
<div id="하나의-열을-여러-열로-나누기" class="section level2" number="16.3">
<h2 number="16.3"><span class="header-section-number">16.3</span> 하나의 열을 여러 열로 나누기</h2>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="#cb446-1" aria-hidden="true" tabindex="-1"></a>table3</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country      year rate             
## * &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            
## 1 Afghanistan  1999 745/19987071     
## 2 Afghanistan  2000 2666/20595360    
## 3 Brazil       1999 37737/172006362  
## 4 Brazil       2000 80488/174504898  
## 5 China        1999 212258/1272915272
## 6 China        2000 213766/1280428583</code></pre>
<p>rate 열에는 ###/#### 형태로 데이터가 들어가 있습니다. 이를 / 기준으로 앞과 뒤로 각각 나누어보도록 하겠습니다.</p>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="#cb448-1" aria-hidden="true" tabindex="-1"></a>table3 <span class="sc">%&gt;%</span> </span>
<span id="cb448-2"><a href="#cb448-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country      year cases  population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745    19987071  
## 2 Afghanistan  2000 2666   20595360  
## 3 Brazil       1999 37737  172006362 
## 4 Brazil       2000 80488  174504898 
## 5 China        1999 212258 1272915272
## 6 China        2000 213766 1280428583</code></pre>
<p>rate 열이 “/”를 기준으로 cases와 population 열로 분리되었습니다.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="#cb450-1" aria-hidden="true" tabindex="-1"></a>table3 <span class="sc">%&gt;%</span> </span>
<span id="cb450-2"><a href="#cb450-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;cases&quot;</span>, <span class="st">&quot;population&quot;</span>), <span class="at">remove =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 5
##   country      year rate              cases  population
##   &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;             &lt;chr&gt;  &lt;chr&gt;     
## 1 Afghanistan  1999 745/19987071      745    19987071  
## 2 Afghanistan  2000 2666/20595360     2666   20595360  
## 3 Brazil       1999 37737/172006362   37737  172006362 
## 4 Brazil       2000 80488/174504898   80488  174504898 
## 5 China        1999 212258/1272915272 212258 1272915272
## 6 China        2000 213766/1280428583 213766 1280428583</code></pre>
<p>remove = FALSE를 추가해주면 원래의 열을 유지합니다.</p>
</div>
<div id="여러-열을-하나로-합치기" class="section level2" number="16.4">
<h2 number="16.4"><span class="header-section-number">16.4</span> 여러 열을 하나로 합치기</h2>
<p><code>separate()</code> 함수와는 반대로, <code>unite()</code> 함수를 이용시 여러 열을 하나로 합칠 수 있습니다.</p>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="#cb452-1" aria-hidden="true" tabindex="-1"></a>table5</span></code></pre></div>
<pre><code>## # A tibble: 6 x 4
##   country     century year  rate             
## * &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 19      99    745/19987071     
## 2 Afghanistan 20      00    2666/20595360    
## 3 Brazil      19      99    37737/172006362  
## 4 Brazil      20      00    80488/174504898  
## 5 China       19      99    212258/1272915272
## 6 China       20      00    213766/1280428583</code></pre>
<p>century와 year 열을 하나로 합쳐보도록 하겠습니다.</p>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="#cb454-1" aria-hidden="true" tabindex="-1"></a>table5 <span class="sc">%&gt;%</span> </span>
<span id="cb454-2"><a href="#cb454-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(new, century, year, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country     new   rate             
##   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 1999  745/19987071     
## 2 Afghanistan 2000  2666/20595360    
## 3 Brazil      1999  37737/172006362  
## 4 Brazil      2000  80488/174504898  
## 5 China       1999  212258/1272915272
## 6 China       2000  213766/1280428583</code></pre>
<p>new 열에 지정한 데이터가 합쳐지게 됩니다.</p>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="#cb456-1" aria-hidden="true" tabindex="-1"></a>table5 <span class="sc">%&gt;%</span> </span>
<span id="cb456-2"><a href="#cb456-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unite</span>(new, century, year, <span class="at">sep =</span> <span class="st">&quot;_&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   country     new   rate             
##   &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            
## 1 Afghanistan 19_99 745/19987071     
## 2 Afghanistan 20_00 2666/20595360    
## 3 Brazil      19_99 37737/172006362  
## 4 Brazil      20_00 80488/174504898  
## 5 China       19_99 212258/1272915272
## 6 China       20_00 213766/1280428583</code></pre>
<p>sep 인자를 통해 구분자를 선택할 수도 있습니다.</p>
</div>
<div id="tidyr의-기타-함수" class="section level2" number="16.5">
<h2 number="16.5"><span class="header-section-number">16.5</span> <code>tidyr</code>의 기타 함수</h2>
<div id="fill" class="section level3" number="16.5.1">
<h3 number="16.5.1"><span class="header-section-number">16.5.1</span> <code>fill()</code></h3>
<p>많은 부분이 결측치로 비어 있으므로, 이를 채워줄 필요가 있습니다.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="#cb458-1" aria-hidden="true" tabindex="-1"></a>treatment <span class="ot">=</span> <span class="fu">tribble</span>(</span>
<span id="cb458-2"><a href="#cb458-2" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span> person,           <span class="sc">~</span> treatment, <span class="sc">~</span>response,</span>
<span id="cb458-3"><a href="#cb458-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Derrick Whitmore&quot;</span>, <span class="dv">1</span>,           <span class="dv">7</span>,</span>
<span id="cb458-4"><a href="#cb458-4" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span>,                 <span class="dv">2</span>,           <span class="dv">10</span>,</span>
<span id="cb458-5"><a href="#cb458-5" aria-hidden="true" tabindex="-1"></a>  <span class="cn">NA</span>,                 <span class="cn">NA</span>,           <span class="dv">9</span>,</span>
<span id="cb458-6"><a href="#cb458-6" aria-hidden="true" tabindex="-1"></a>  <span class="st">&quot;Katherine Burke&quot;</span>,  <span class="dv">1</span>,           <span class="dv">4</span></span>
<span id="cb458-7"><a href="#cb458-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb458-8"><a href="#cb458-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb458-9"><a href="#cb458-9" aria-hidden="true" tabindex="-1"></a>treatment</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   person           treatment response
##   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;
## 1 Derrick Whitmore         1        7
## 2 &lt;NA&gt;                     2       10
## 3 &lt;NA&gt;                    NA        9
## 4 Katherine Burke          1        4</code></pre>
<p>treatment의 2번째와 3번째 행에 <code>NA</code> 데이터가 있어 이를 채워줄 필요가 있습니다.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="#cb460-1" aria-hidden="true" tabindex="-1"></a>treatment <span class="sc">%&gt;%</span> </span>
<span id="cb460-2"><a href="#cb460-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fill</span>(person, treatment)</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   person           treatment response
##   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;
## 1 Derrick Whitmore         1        7
## 2 Derrick Whitmore         2       10
## 3 Derrick Whitmore         2        9
## 4 Katherine Burke          1        4</code></pre>
<p><code>fill()</code> 함수는 결측치가 있을 경우, 각 열의 이전 데이터를 이용해 채워줍니다.</p>
</div>
<div id="replce_na" class="section level3" number="16.5.2">
<h3 number="16.5.2"><span class="header-section-number">16.5.2</span> <code>replce_na()</code></h3>
<p>NA 데이터를 특정 값으로 변경할 수도 있습니다.</p>
<div class="sourceCode" id="cb462"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb462-1"><a href="#cb462-1" aria-hidden="true" tabindex="-1"></a>treatment <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="at">replace =</span> <span class="fu">list</span> (<span class="at">person =</span> <span class="st">&quot;unknown&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   person           treatment response
##   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;
## 1 Derrick Whitmore         1        7
## 2 unknown                  2       10
## 3 unknown                 NA        9
## 4 Katherine Burke          1        4</code></pre>
<p><code>replace_na()</code> 함수를 이용해 person 열의 NA 데이터를 <strong>unknown</strong>으로 변경하였습니다.</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="#cb464-1" aria-hidden="true" tabindex="-1"></a>treatment <span class="sc">%&gt;%</span> <span class="fu">replace_na</span>(<span class="at">replace =</span> <span class="fu">list</span> (<span class="at">person =</span> <span class="st">&quot;unknown&quot;</span>, <span class="at">treatment =</span> <span class="dv">1</span>))</span></code></pre></div>
<pre><code>## # A tibble: 4 x 3
##   person           treatment response
##   &lt;chr&gt;                &lt;dbl&gt;    &lt;dbl&gt;
## 1 Derrick Whitmore         1        7
## 2 unknown                  2       10
## 3 unknown                  1        9
## 4 Katherine Burke          1        4</code></pre>
<p>각 열마다 서로 다른 값으로 변경할 수 있습니다.</p>
<!--chapter:end:tidyr.Rmd-->
</div>
</div>
</div>
<div id="dplyr을-이용한-데이터-변형하기" class="section level1" number="17">
<h1 number="17"><span class="header-section-number">17</span> <code>dplyr</code>을 이용한 데이터 변형하기</h1>
<p>데이터를 필터링 하거나, 요약하거나, 정렬하거나, 새로운 변수를 만드는 등 데이터 분석을 위해서는 데이터 변형하고 가공해야 하는 경우가 많습니다. R의 기본 함수도 이러한 기능을 제공하지만. <code>dplyr</code> 패키지를 이용할 경우 훨씬 빠르고 효율적으로 업무를 처리할 수 있습니다.</p>
<p>nycflights13 패키지의 flights 데이터셋을 예제로 사용하도록 하겠습니다.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb466-1"><a href="#cb466-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb466-2"><a href="#cb466-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(nycflights13)</span>
<span id="cb466-3"><a href="#cb466-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb466-4"><a href="#cb466-4" aria-hidden="true" tabindex="-1"></a>flights</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228 
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211 
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA 
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB 
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN 
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463 
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB 
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS 
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB 
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA 
## # ... with 336,766 more rows, and 7 more variables: origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<div id="select-원하는-열-선택하기" class="section level2" number="17.1">
<h2 number="17.1"><span class="header-section-number">17.1</span> <code>select()</code>: 원하는 열 선택하기</h2>
<p><code>select()</code> 함수를 이용해 특정 열만을 선택할 수 있습니다.</p>
<div class="sourceCode" id="cb468"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb468-1"><a href="#cb468-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year, month, day)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     year month   day
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1
##  2  2013     1     1
##  3  2013     1     1
##  4  2013     1     1
##  5  2013     1     1
##  6  2013     1     1
##  7  2013     1     1
##  8  2013     1     1
##  9  2013     1     1
## 10  2013     1     1
## # ... with 336,766 more rows</code></pre>
<p>year, month, day 열을 선택했습니다.</p>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="#cb470-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(year<span class="sc">:</span>day)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 3
##     year month   day
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;
##  1  2013     1     1
##  2  2013     1     1
##  3  2013     1     1
##  4  2013     1     1
##  5  2013     1     1
##  6  2013     1     1
##  7  2013     1     1
##  8  2013     1     1
##  9  2013     1     1
## 10  2013     1     1
## # ... with 336,766 more rows</code></pre>
<p>콜론(:)을 이용해 year부터 day 까지의 열을 한번에 선택할 수도 있습니다.</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="#cb472-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span>(year<span class="sc">:</span>day))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 16
##    dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum origin dest 
##       &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;
##  1      517            515         2      830            819        11 UA        1545 N14228  EWR    IAH  
##  2      533            529         4      850            830        20 UA        1714 N24211  LGA    IAH  
##  3      542            540         2      923            850        33 AA        1141 N619AA  JFK    MIA  
##  4      544            545        -1     1004           1022       -18 B6         725 N804JB  JFK    BQN  
##  5      554            600        -6      812            837       -25 DL         461 N668DN  LGA    ATL  
##  6      554            558        -4      740            728        12 UA        1696 N39463  EWR    ORD  
##  7      555            600        -5      913            854        19 B6         507 N516JB  EWR    FLL  
##  8      557            600        -3      709            723       -14 EV        5708 N829AS  LGA    IAD  
##  9      557            600        -3      838            846        -8 B6          79 N593JB  JFK    MCO  
## 10      558            600        -2      753            745         8 AA         301 N3ALAA  LGA    ORD  
## # ... with 336,766 more rows, and 5 more variables: air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;</code></pre>
<p>마이너스(-)를 이용할 경우 해당 열을 제외한 모든 열이 선택됩니다.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="#cb474-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="fu">starts_with</span>(<span class="st">&quot;dep&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 2
##    dep_time dep_delay
##       &lt;int&gt;     &lt;dbl&gt;
##  1      517         2
##  2      533         4
##  3      542         2
##  4      544        -1
##  5      554        -6
##  6      554        -4
##  7      555        -5
##  8      557        -3
##  9      557        -3
## 10      558        -2
## # ... with 336,766 more rows</code></pre>
<p><code>select()</code> 함수 내에 <code>starts_with()</code> 함수를 이용할 경우, 해당 문자로 시작하는 열을 모두 선택할 수 있습니다.</p>
</div>
<div id="rename-이름-새로-부여하기" class="section level2" number="17.2">
<h2 number="17.2"><span class="header-section-number">17.2</span> <code>rename()</code>: 이름 새로 부여하기</h2>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="#cb476-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">rename</span>(<span class="at">tail_num =</span> tailnum) <span class="sc">%&gt;%</span> <span class="fu">select</span>(tail_num)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 1
##    tail_num
##    &lt;chr&gt;   
##  1 N14228  
##  2 N24211  
##  3 N619AA  
##  4 N804JB  
##  5 N668DN  
##  6 N39463  
##  7 N516JB  
##  8 N829AS  
##  9 N593JB  
## 10 N3ALAA  
## # ... with 336,766 more rows</code></pre>
<p><code>rename()</code> 함수를 이용해 tailnum 이던 열 이름을 tail_num 으로 변경하였습니다.</p>
</div>
<div id="filter-필터링" class="section level2" number="17.3">
<h2 number="17.3"><span class="header-section-number">17.3</span> <code>filter()</code>: 필터링</h2>
<p>특정 열에 원하는 데이터가 있는 부분만 필터링을 해야하는 경우가 많으며, <code>filter()</code> 함수를 사용해 손쉽게 해결할 수 있습니다.</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb478-1"><a href="#cb478-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">filter</span>(month <span class="sc">==</span> <span class="dv">1</span>, day <span class="sc">==</span> <span class="dv">1</span>)</span></code></pre></div>
<pre><code>## # A tibble: 842 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228 
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211 
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA 
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB 
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN 
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463 
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB 
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS 
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB 
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA 
## # ... with 832 more rows, and 7 more variables: origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>month 열이 1이고, day 열이 1인 부분만 선택되었습니다.</p>
</div>
<div id="group_by-원하는-조건으로-그룹화" class="section level2" number="17.4">
<h2 number="17.4"><span class="header-section-number">17.4</span> <code>group_by()</code>: 원하는 조건으로 그룹화</h2>
<p>각 그룹별 통계량을 계산할 때는 <code>group_by()</code> 함수를 통해 그룹을 묶고, 계산하는 것이 편합니다.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="#cb480-1" aria-hidden="true" tabindex="-1"></a>by_day <span class="ot">=</span> <span class="fu">group_by</span>(flights, year, month, day)</span>
<span id="cb480-2"><a href="#cb480-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb480-3"><a href="#cb480-3" aria-hidden="true" tabindex="-1"></a>by_day</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
## # Groups:   year, month, day [365]
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228 
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211 
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA 
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB 
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN 
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463 
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB 
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS 
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB 
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA 
## # ... with 336,766 more rows, and 7 more variables: origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>Division을 기준으로 그룹을 묶었습니다. 아직 계산을 하지 않았으므로 데이터프레임 자체는 원래와 동일하며, <strong>Groups</strong>를 통해 어떠한 조건으로 그룹이 묶여있는지 확인됩니다.</p>
</div>
<div id="summarize-요약값-계산하기" class="section level2" number="17.5">
<h2 number="17.5"><span class="header-section-number">17.5</span> <code>summarize()</code>: 요약값 계산하기</h2>
<p>요약 통계값은 <code>summarize()</code> 함수를 통해 쉽게 계산할 수 있습니다.</p>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb482-1"><a href="#cb482-1" aria-hidden="true" tabindex="-1"></a>by_day <span class="sc">%&gt;%</span> <span class="fu">summarise</span>(<span class="at">delay =</span> <span class="fu">mean</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<pre><code>## # A tibble: 365 x 4
## # Groups:   year, month [12]
##     year month   day delay
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;
##  1  2013     1     1 11.5 
##  2  2013     1     2 13.9 
##  3  2013     1     3 11.0 
##  4  2013     1     4  8.95
##  5  2013     1     5  5.73
##  6  2013     1     6  7.15
##  7  2013     1     7  5.42
##  8  2013     1     8  2.55
##  9  2013     1     9  2.28
## 10  2013     1    10  2.84
## # ... with 355 more rows</code></pre>
<p>각 그룹 별 dep_delay의 평균을 구하며, <code>na.rm</code> 인자를 TRUE로 설정하여 <code>NA</code> 데이터는 제거해 줍니다.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="#cb484-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">group_by</span>(dest) <span class="sc">%&gt;%</span></span>
<span id="cb484-2"><a href="#cb484-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb484-3"><a href="#cb484-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">count =</span> <span class="fu">n</span>(),</span>
<span id="cb484-4"><a href="#cb484-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">dist =</span> <span class="fu">mean</span>(distance, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb484-5"><a href="#cb484-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">delay =</span> <span class="fu">mean</span>(arr_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb484-6"><a href="#cb484-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 105 x 4
##    dest  count  dist delay
##    &lt;chr&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 ABQ     254 1826   4.38
##  2 ACK     265  199   4.85
##  3 ALB     439  143  14.4 
##  4 ANC       8 3370  -2.5 
##  5 ATL   17215  757. 11.3 
##  6 AUS    2439 1514.  6.02
##  7 AVL     275  584.  8.00
##  8 BDL     443  116   7.05
##  9 BGR     375  378   8.03
## 10 BHM     297  866. 16.9 
## # ... with 95 more rows</code></pre>
<p>한 번에 여러 통계량을 계산할 수도 습니다. <code>n()</code>은 전체 행 갯수를 의미합니다. <code>group_by()</code>를 통해 그룹으로 묶여진 데이터에 <code>summarize()</code> 함수를 적용할 경우, 그룹 별 통계량이 계산됩니다.</p>
</div>
<div id="arrange-데이터-정렬하기" class="section level2" number="17.6">
<h2 number="17.6"><span class="header-section-number">17.6</span> <code>arrange()</code>: 데이터 정렬하기</h2>
<p><code>arrange()</code> 함수를 통해 원하는 열을 기준으로 데이터를 순서대로 정렬할 수 있으며, 오름차순을 기본으로 합니다.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="#cb486-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(year, month, day)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  
##  1  2013     1     1      517            515         2      830            819        11 UA        1545 N14228 
##  2  2013     1     1      533            529         4      850            830        20 UA        1714 N24211 
##  3  2013     1     1      542            540         2      923            850        33 AA        1141 N619AA 
##  4  2013     1     1      544            545        -1     1004           1022       -18 B6         725 N804JB 
##  5  2013     1     1      554            600        -6      812            837       -25 DL         461 N668DN 
##  6  2013     1     1      554            558        -4      740            728        12 UA        1696 N39463 
##  7  2013     1     1      555            600        -5      913            854        19 B6         507 N516JB 
##  8  2013     1     1      557            600        -3      709            723       -14 EV        5708 N829AS 
##  9  2013     1     1      557            600        -3      838            846        -8 B6          79 N593JB 
## 10  2013     1     1      558            600        -2      753            745         8 AA         301 N3ALAA 
## # ... with 336,766 more rows, and 7 more variables: origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p>[year -&gt; month -&gt; day] 순으로 내림차순 정렬이 됩니다.</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="#cb488-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(dep_delay))</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 19
##     year month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time arr_delay carrier flight tailnum
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;int&gt; &lt;chr&gt;  
##  1  2013     1     9      641            900      1301     1242           1530      1272 HA          51 N384HA 
##  2  2013     6    15     1432           1935      1137     1607           2120      1127 MQ        3535 N504MQ 
##  3  2013     1    10     1121           1635      1126     1239           1810      1109 MQ        3695 N517MQ 
##  4  2013     9    20     1139           1845      1014     1457           2210      1007 AA         177 N338AA 
##  5  2013     7    22      845           1600      1005     1044           1815       989 MQ        3075 N665MQ 
##  6  2013     4    10     1100           1900       960     1342           2211       931 DL        2391 N959DL 
##  7  2013     3    17     2321            810       911      135           1020       915 DL        2119 N927DA 
##  8  2013     6    27      959           1900       899     1236           2226       850 DL        2007 N3762Y 
##  9  2013     7    22     2257            759       898      121           1026       895 DL        2047 N6716C 
## 10  2013    12     5      756           1700       896     1058           2020       878 AA         172 N5DMAA 
## # ... with 336,766 more rows, and 7 more variables: origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;,
## #   hour &lt;dbl&gt;, minute &lt;dbl&gt;, time_hour &lt;dttm&gt;</code></pre>
<p><code>arrange()</code> 내에 <code>desc()</code> 함수를 추가할 경우 내림차순으로 정렬됩니다.</p>
</div>
<div id="join-데이터-합치기" class="section level2" number="17.7">
<h2 number="17.7"><span class="header-section-number">17.7</span> join(): 데이터 합치기</h2>
<p>각기 다른 데이터를 하나로 합치기 위해서는 join 함수를 사용해야 합니다. <code>dplyr</code>에는 다양한 관련 함수가 있습니다.</p>
<ul>
<li><code>inner_join()</code></li>
<li><code>left_join()</code></li>
<li><code>right_join()</code></li>
<li><code>full_join()</code></li>
<li><code>semi_join()</code></li>
<li><code>anti_join()</code></li>
</ul>
<p>다음 두개의 데이터 테이블을 이용하도록 합니다.</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="#cb490-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="ot">=</span> flights <span class="sc">%&gt;%</span> </span>
<span id="cb490-2"><a href="#cb490-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year<span class="sc">:</span>day, hour, tailnum, carrier)</span>
<span id="cb490-3"><a href="#cb490-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb490-4"><a href="#cb490-4" aria-hidden="true" tabindex="-1"></a>flights2</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 6
##     year month   day  hour tailnum carrier
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;  
##  1  2013     1     1     5 N14228  UA     
##  2  2013     1     1     5 N24211  UA     
##  3  2013     1     1     5 N619AA  AA     
##  4  2013     1     1     5 N804JB  B6     
##  5  2013     1     1     6 N668DN  DL     
##  6  2013     1     1     5 N39463  UA     
##  7  2013     1     1     6 N516JB  B6     
##  8  2013     1     1     6 N829AS  EV     
##  9  2013     1     1     6 N593JB  B6     
## 10  2013     1     1     6 N3ALAA  AA     
## # ... with 336,766 more rows</code></pre>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="#cb492-1" aria-hidden="true" tabindex="-1"></a>airlines</span></code></pre></div>
<pre><code>## # A tibble: 16 x 2
##    carrier name                       
##    &lt;chr&gt;   &lt;chr&gt;                      
##  1 9E      Endeavor Air Inc.          
##  2 AA      American Airlines Inc.     
##  3 AS      Alaska Airlines Inc.       
##  4 B6      JetBlue Airways            
##  5 DL      Delta Air Lines Inc.       
##  6 EV      ExpressJet Airlines Inc.   
##  7 F9      Frontier Airlines Inc.     
##  8 FL      AirTran Airways Corporation
##  9 HA      Hawaiian Airlines Inc.     
## 10 MQ      Envoy Air                  
## 11 OO      SkyWest Airlines Inc.      
## 12 UA      United Air Lines Inc.      
## 13 US      US Airways Inc.            
## 14 VX      Virgin America             
## 15 WN      Southwest Airlines Co.     
## 16 YV      Mesa Airlines Inc.</code></pre>
<p><code>left_join()</code> 함수를 이용해 왼쪽 데이터프레임을 기준으로 합쳐보도록 합니다. 두 데이터 모두 carrier 열이 있으므로 이를 기준으로 데이터가 합쳐집니다.</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="#cb494-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span></span>
<span id="cb494-2"><a href="#cb494-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(airlines, <span class="at">by =</span> <span class="st">&quot;carrier&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 7
##     year month   day  hour tailnum carrier name                    
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;                   
##  1  2013     1     1     5 N14228  UA      United Air Lines Inc.   
##  2  2013     1     1     5 N24211  UA      United Air Lines Inc.   
##  3  2013     1     1     5 N619AA  AA      American Airlines Inc.  
##  4  2013     1     1     5 N804JB  B6      JetBlue Airways         
##  5  2013     1     1     6 N668DN  DL      Delta Air Lines Inc.    
##  6  2013     1     1     5 N39463  UA      United Air Lines Inc.   
##  7  2013     1     1     6 N516JB  B6      JetBlue Airways         
##  8  2013     1     1     6 N829AS  EV      ExpressJet Airlines Inc.
##  9  2013     1     1     6 N593JB  B6      JetBlue Airways         
## 10  2013     1     1     6 N3ALAA  AA      American Airlines Inc.  
## # ... with 336,766 more rows</code></pre>
<p>flights2의 모든 데이터를 가져오며, airlines의 name 열이 기존 테이블에 추가됩니다. join 구문에 대한 더욱 상세한 예제 및 애니메이션은 다음 주소를 참조하시기 바랍니다.</p>
<p><a href="https://github.com/gadenbuie/tidyexplain" class="uri">https://github.com/gadenbuie/tidyexplain</a></p>
</div>
<div id="mutate-새로운-열-생성하기" class="section level2" number="17.8">
<h2 number="17.8"><span class="header-section-number">17.8</span> <code>mutate()</code>: 새로운 열 생성하기</h2>
<p><code>mutate()</code> 함수를 사용해 기존 열끼리 계산을 하여 새로운 열을 생성할 수 있습니다.</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="#cb496-1" aria-hidden="true" tabindex="-1"></a>flights_sml <span class="ot">=</span> flights <span class="sc">%&gt;%</span></span>
<span id="cb496-2"><a href="#cb496-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(</span>
<span id="cb496-3"><a href="#cb496-3" aria-hidden="true" tabindex="-1"></a>    year<span class="sc">:</span>day, </span>
<span id="cb496-4"><a href="#cb496-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ends_with</span>(<span class="st">&quot;delay&quot;</span>), </span>
<span id="cb496-5"><a href="#cb496-5" aria-hidden="true" tabindex="-1"></a>    distance, </span>
<span id="cb496-6"><a href="#cb496-6" aria-hidden="true" tabindex="-1"></a>    air_time</span>
<span id="cb496-7"><a href="#cb496-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb496-8"><a href="#cb496-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-9"><a href="#cb496-9" aria-hidden="true" tabindex="-1"></a>flights_sml <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(</span>
<span id="cb496-10"><a href="#cb496-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">gain =</span> dep_delay <span class="sc">-</span> arr_delay,</span>
<span id="cb496-11"><a href="#cb496-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">speed =</span> distance <span class="sc">/</span> air_time <span class="sc">*</span> <span class="dv">60</span></span>
<span id="cb496-12"><a href="#cb496-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## # A tibble: 336,776 x 9
##     year month   day dep_delay arr_delay distance air_time  gain speed
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  2013     1     1         2        11     1400      227    -9  370.
##  2  2013     1     1         4        20     1416      227   -16  374.
##  3  2013     1     1         2        33     1089      160   -31  408.
##  4  2013     1     1        -1       -18     1576      183    17  517.
##  5  2013     1     1        -6       -25      762      116    19  394.
##  6  2013     1     1        -4        12      719      150   -16  288.
##  7  2013     1     1        -5        19     1065      158   -24  404.
##  8  2013     1     1        -3       -14      229       53    11  259.
##  9  2013     1     1        -3        -8      944      140     5  405.
## 10  2013     1     1        -2         8      733      138   -10  319.
## # ... with 336,766 more rows</code></pre>
<p>먼저 flights에서 일부 열을 선택한 후, <code>mutate()</code> 함수를 이용해 새로운 열을 만들어 줍니다. gain 열에는 dep_delay와 arr_delay의 차이가, speed 열에는 distance와 air_time 비에 60을 곱한 값이 새롭게 생성됩니다.</p>
<!--chapter:end:dplyr.Rmd-->
</div>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
